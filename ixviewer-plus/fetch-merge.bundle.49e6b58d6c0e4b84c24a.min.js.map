{"version":3,"file":"fetch-merge.bundle.49e6b58d6c0e4b84c24a.min.js","mappings":"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","sources":["webpack://ixviewer-2/webpack/runtime/chunk loaded","webpack://ixviewer-2/webpack/runtime/startup chunk dependencies","webpack://ixviewer-2/./src/ts/fetch-merge/index.ts","webpack://ixviewer-2/./src/ts/workers/index.ts","webpack://ixviewer-2/webpack/bootstrap","webpack://ixviewer-2/webpack/runtime/define property getters","webpack://ixviewer-2/webpack/runtime/ensure chunk","webpack://ixviewer-2/webpack/runtime/get javascript chunk filename","webpack://ixviewer-2/webpack/runtime/get mini-css chunk filename","webpack://ixviewer-2/webpack/runtime/global","webpack://ixviewer-2/webpack/runtime/hasOwnProperty shorthand","webpack://ixviewer-2/webpack/runtime/make namespace object","webpack://ixviewer-2/webpack/runtime/publicPath","webpack://ixviewer-2/webpack/runtime/importScripts chunk loading","webpack://ixviewer-2/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(783).then(next);\n};","import * as cheerio from 'cheerio';\r\nimport * as convert from 'xml-js';\r\nimport { Meta, Xbrltype, reference } from '../interface/meta';\r\nimport { Context, DeiAmendmentFlagAttributes, Instance, LinkFootnote, LinkFootnoteArc, LinkLOC, Units } from '../interface/instance';\r\nimport { Reference, SingleFact } from '../interface/fact';\r\nimport { Logger, ILogObj } from 'tslog';\r\n\r\n/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment\r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\nexport class FetchAndMerge {\r\n    private absolute: string;\r\n    private params: {\r\n        doc: string,\r\n        'doc-file': string,\r\n        hostName: string,\r\n        redline: boolean,\r\n        metalinks: string,\r\n        'metalinks-file': string,\r\n        fact: string,\r\n        summary: string,\r\n    };\r\n    private customPrefix: undefined | string;\r\n    private currentInstance: Array<{\r\n        current: boolean;\r\n        formInformation: {\r\n            axisCustom: number;\r\n            axisStandard: number;\r\n            baseTaxonomies: { [key: string]: number; };\r\n            contextCount: number;\r\n            dts: { [key: string]: { [key: string]: Array<string>; }; };\r\n            elementCount: number;\r\n            entityCount: 1;\r\n            hidden: { [key: string]: number; };\r\n            keyCustom: number;\r\n            keyStandard: number;\r\n            memberCustom: number;\r\n            memberStandard: number;\r\n            nsprefix: string;\r\n            nsuri: string;\r\n            segmentCount: number;\r\n            unitcount: number;\r\n        };\r\n        instance: number;\r\n        map: Map<string, SingleFact>;\r\n        metaInstance: Meta;\r\n        xhtmls: Array<{\r\n            current: boolean;\r\n            loaded: boolean;\r\n            slug: string;\r\n            url: string;\r\n            xhtml: string;\r\n        }>;\r\n        xmlSlug: Array<string>;\r\n        xmlUrls: Array<string>;\r\n    }> | undefined;\r\n    private std_ref;\r\n    private sections;\r\n    private metaVersion: string | undefined;\r\n    private instance;\r\n\r\n    constructor(input: {\r\n        absolute: string,\r\n        params: {\r\n            doc: string,\r\n            'doc-file': string,\r\n            hostName: string,\r\n            redline: boolean,\r\n            metalinks: string,\r\n            'metalinks-file': string,\r\n        },\r\n        instance: number | null,\r\n        std_ref: { [key: string]: Reference }\r\n\r\n    }) {\r\n        this.absolute = input.absolute;\r\n        this.partial = input.partial;\r\n        this.map = input.map;\r\n        this.params = input.params;\r\n        this.customPrefix = input.customPrefix;\r\n        this.instance = input.instance;\r\n        this.std_ref = input.std_ref;\r\n    }\r\n\r\n    init() {\r\n\r\n        const XHTMLandInstance = (instance, addInstance = false) => {\r\n            return Promise.all([\r\n                this.fetchXHTML(),\r\n                this.fetchInstance(),\r\n            ]).then((allResponses) => {\r\n                const errors = allResponses.filter(element => element ? Object.prototype.hasOwnProperty.call(element, 'error') : false);\r\n                if (errors.length) {\r\n                    const errorMessages = errors.map(current => current.message);\r\n                    return {\r\n                        all: { error: true, message: errorMessages }\r\n                    };\r\n                }\r\n                allResponses[0].forEach((current, index) => {\r\n                    this.currentInstance.xhtmls[index].loaded = true;\r\n                    this.currentInstance.xhtmls[index].xhtml = current.xhtml;\r\n                });\r\n                this.currentInstance.xml = (allResponses[1] as Instance);\r\n                this.mergeAllResponses(addInstance);\r\n                return {\r\n                    all: { instance: (addInstance ? instance.instance : instance), sections: this.sections, std_ref: this.std_ref }\r\n                }\r\n            })\r\n        };\r\n\r\n        const MetaandSummary = () => {\r\n            return Promise.all([\r\n                this.fetchMeta(),\r\n                this.fetchSummary(),\r\n            ]).then((allResponses) => {\r\n                this.metaVersion = allResponses[0].version;\r\n                this.std_ref = allResponses[0].std_ref;\r\n                if (allResponses[0].error) {\r\n                    return {\r\n                        all: { error: true, message: [allResponses[0].message] }\r\n                    }\r\n                } else {\r\n                    this.currentInstance = allResponses[0].instance?.filter(element => element.current)[0];\r\n\r\n                    const mapCategoryName = (input: string) => {\r\n                        const options = {\r\n                            \"Cover\": \"Cover\",\r\n                            \"document\": \"Document & Entity Information\",\r\n                            \"statement\": \"Financial Statements\",\r\n                            \"Statements\": \"Financial Statements\",\r\n                            \"disclosure\": \"Notes to the Financial Statements\",\r\n                            \"Notes\": \"Notes to Financial Statements\",\r\n                            \"Policies\": \"Accounting Policies\",\r\n                            \"Tables\": \"Notes Tables\",\r\n                            \"Details\": \"Notes Details\",\r\n                            \"RR_Summaries\": \"RR Summaries\",\r\n                            \"Prospectus\": \"Prospectus\",\r\n                            \"Fee_Exhibit\": \"RR Summaries\",\r\n                        };\r\n                        if (options[input]) {\r\n                            return options[input];\r\n                        }\r\n                        return 'INCOMPLETE SECTIONS DATA!';\r\n                    };\r\n                    const metaLinksSections = Object.values(allResponses[0].sections);\r\n                    this.sections = allResponses[1].MyReports.Report.reduce((accumulator, current) => {\r\n                        if (current && current.MenuCategory && current.Position && current.ShortName && current._attributes) {\r\n                            const fact = { name: '', contextRef: '', instance: null };\r\n                            const additional = metaLinksSections.find(element => element.shortName === current.ShortName._text);\r\n                            if (additional) {\r\n\r\n                                fact.instance = additional.instance;\r\n                                if (additional.uniqueAnchor) {\r\n                                    fact.name = additional.uniqueAnchor.name;\r\n                                    fact.contextRef = additional.uniqueAnchor.contextRef;\r\n                                    fact.file = additional.uniqueAnchor.baseRef;\r\n                                } else if (additional.firstAnchor) {\r\n                                    fact.name = additional.firstAnchor.name;\r\n                                    fact.contextRef = additional.firstAnchor.contextRef;\r\n                                    fact.file = additional.firstAnchor.baseRef;\r\n                                }\r\n                            }\r\n                            const index = accumulator.findIndex(element => element.name === mapCategoryName(current.MenuCategory._text))\r\n                            if (index !== -1) {\r\n                                accumulator[index].children.push(\r\n                                    {\r\n                                        sort: +current.Position._text,\r\n                                        name: current.ShortName._text,\r\n                                        // file: current._attributes.instance,\r\n                                        fact: fact,\r\n                                    }\r\n\r\n                                );\r\n                                accumulator[index].children.sort((first, second) => {\r\n                                    if (first.sort < second.sort) {\r\n                                        return -1;\r\n                                    }\r\n                                    if (first.sort > second.sort) {\r\n                                        return 1;\r\n                                    }\r\n                                    return 0;\r\n                                });\r\n                            } else {\r\n                                accumulator.push({\r\n                                    name: mapCategoryName(current.MenuCategory._text),\r\n                                    children: [\r\n                                        {\r\n                                            sort: +current.Position._text,\r\n                                            name: current.ShortName._text,\r\n                                            file: current._attributes.instance,\r\n                                            fact: fact,\r\n                                        }\r\n                                    ]\r\n                                });\r\n\r\n                            }\r\n                        }\r\n                        return accumulator;\r\n                    }, []);\r\n                }\r\n\r\n                return Promise.all([\r\n                    XHTMLandInstance(allResponses[0], true)\r\n                ]).then(data => {\r\n                    return data[0];\r\n                })\r\n            });\r\n        };\r\n\r\n        if (this.instance !== null) {\r\n            this.currentInstance = this.instance.filter(element => element.current)[0];\r\n            return XHTMLandInstance(this.instance);\r\n        } else {\r\n            return MetaandSummary();\r\n        }\r\n    }\r\n\r\n    fetchXHTML() {\r\n        const promises = this.currentInstance.xhtmls.map((current: { url: string }) => {\r\n            return new Promise((resolve) =>\r\n                fetch(current.url, {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/xhtml+xml\"\r\n                    }\r\n                }).then((response) => {\r\n                    if (response.status >= 200 && response.status <= 299) {\r\n                        return response.text();\r\n                    } else {\r\n                        throw Error(`${response.status.toString()}, Could not find \"${this.params.doc}\"`);\r\n                    }\r\n                }).then((data) => {\r\n                    resolve({ xhtml: data });\r\n                }).catch((error) => {\r\n                    resolve({ error: true, message: error });\r\n                }));\r\n        });\r\n        return Promise.all(promises).then((allXHTML: Array<{ xhtml: string, index: number }>) => {\r\n            return allXHTML;\r\n        });\r\n    }\r\n\r\n    fetchMeta(): Promise<{\r\n        error?: boolean,\r\n        message?: string,\r\n        instance?: Array<{\r\n            current: boolean,\r\n            instance: number,\r\n            xhtmls: Array<{\r\n                slug: string,\r\n                url: string,\r\n                current: boolean,\r\n                loaded: boolean\r\n            }>,\r\n            xmlSlug: Array<string>,\r\n            xmlUrls: Array<string>,\r\n            metaInstance: Array<Instance>\r\n        }>,\r\n        meta?: Meta,\r\n        inlineFiles?: Array<{ slug: string, current: boolean, loaded: boolean }>\r\n    }> {\r\n        return new Promise((resolve) => {\r\n            return fetch(this.params.metalinks).then((response) => {\r\n                if (response.status >= 200 && response.status <= 299) {\r\n                    return response.json();\r\n                } else {\r\n                    throw Error(response.status.toString());\r\n                }\r\n            }).then((data) => {\r\n\r\n                const XHTMLSlug = this.params.doc.substr(this.params.doc.lastIndexOf('/') + 1);\r\n                const instanceKeys = Object.keys(data.instance).join().split(/[ ,]+/);\r\n                let sections = {}\r\n                if (instanceKeys.includes(XHTMLSlug)) {\r\n                    const instanceObjects = Object.keys(data.instance).map((current, index) => {\r\n\r\n                        Object.keys(data.instance[current].report).forEach((report) => {\r\n                            data.instance[current].report[report].instance = index;\r\n                        });\r\n\r\n                        sections = Object.assign(sections, data.instance[current].report);\r\n                        const xhtmls = current.split(' ').map((element) => {\r\n                            return {\r\n                                slug: element,\r\n                                url: this.params.doc.replace(this.params['doc-file'], element),\r\n                                current: current.split(' ').includes(XHTMLSlug) && element === this.params['doc-file'],\r\n                                loaded: false\r\n                            };\r\n                        });\r\n                        const xmlSlugs = xhtmls.map(element => element.slug.replace('.htm', '_htm.xml'));\r\n                        const xmlUrls = xhtmls.map(element => this.params.metalinks.replace('MetaLinks.json', element.slug.replace('.htm', '_htm.xml')));\r\n                        return {\r\n                            instance: index,\r\n                            xhtmls: xhtmls,\r\n                            current: current.split(' ').includes(XHTMLSlug),\r\n                            xmlSlug: xmlSlugs,\r\n                            xmlUrls: xmlUrls,\r\n                            metaInstance: Object.assign(data.instance[current]),\r\n                            map: new Map()\r\n                        }\r\n                    });\r\n                    delete data.instance;\r\n                    resolve({ instance: instanceObjects, ...data, sections, version: data.version });\r\n                } else {\r\n                    throw Error('Incorrect MetaLinks.json Instance');\r\n                }\r\n                resolve(data);\r\n            }).catch((error) => resolve({ error: true, message: `${error}, Could not find \"${this.params.metalinks}\"` }))\r\n        });\r\n    }\r\n\r\n    fetchSummary() {\r\n        return new Promise((resolve) => {\r\n            return fetch(this.params.summary).then((response) => {\r\n                if (response.status >= 200 && response.status <= 299) {\r\n                    return response.text();\r\n                } else {\r\n                    throw Error(response.status.toString());\r\n                }\r\n            }).then((data) => {\r\n                resolve(JSON.parse(convert.xml2json(data as unknown as string, { compact: true })).FilingSummary)\r\n            }).catch((error) => resolve({ error: true, message: `${error}, Could not find \"${this.params.summary}\"` }))\r\n        });\r\n    }\r\n\r\n    fetchInstance() {\r\n        const promises = this.currentInstance.xmlUrls.map((current) => {\r\n            return new Promise((resolve) =>\r\n                fetch(current).then((response) => {\r\n                    if (response.status >= 200 && response.status <= 299) {\r\n                        return response.text();\r\n                    } else {\r\n                        const indexOf = this.currentInstance.xmlUrls.indexOf(current);\r\n                        if (indexOf >= 0) {\r\n                            this.currentInstance.xmlUrls.splice(indexOf, 1);\r\n                        }\r\n                        throw Error(`${response.status.toString()}, Could not find XML Instance Document`);\r\n                    }\r\n                }).then((data) => {\r\n                    resolve({ instance: data });\r\n                }).catch((error) => {\r\n                    resolve({ error: true, message: error });\r\n                }));\r\n        });\r\n        return Promise.all(promises).then((xmlInstances) => {\r\n            const instance = xmlInstances.filter(element => element.instance);\r\n            if (instance && instance[0]) {\r\n                return JSON.parse(convert.xml2json(instance[0].instance as unknown as string, { compact: true }))\r\n            } else {\r\n                return instance[0];\r\n            }\r\n        });\r\n    }\r\n\r\n    mergeAllResponses(\r\n        includeSections: boolean\r\n    ) {\r\n        this.currentInstance.map = this.buildInitialMap(this.currentInstance.xml);\r\n        if (includeSections) {\r\n            this.sections = this.extractSections();\r\n        }\r\n        this.currentInstance.formInformation = this.extractFormInformation(this.currentInstance.metaInstance);\r\n        this.mergeMapandMeta();\r\n        this.customPrefix = this.currentInstance.metaInstance.nsprefix;\r\n        this.prepareXHTML();\r\n        return;\r\n\r\n    }\r\n\r\n    buildInitialMap(instance: Instance) {\r\n\r\n        const getInstancePrefix = (instance) => {\r\n            const options = Object.keys(instance).filter(element => element.endsWith(':xbrl'))[0];\r\n            return options ? options.split(':')[0] : false;\r\n        };\r\n        const prefix = getInstancePrefix(instance);\r\n\r\n        const xbrlKey = prefix ? `${(prefix as string)}:xbrl` : 'xbrl';\r\n        const contextKey = prefix ? `${(prefix as string)}:context` : 'context';\r\n        const unitKey = prefix ? `${(prefix as string)}:unit` : 'unit';\r\n\r\n        const context = instance[xbrlKey][contextKey];\r\n        const unit = instance[xbrlKey][unitKey];\r\n        const footnote = instance[xbrlKey]['link:footnoteLink'];\r\n\r\n        delete instance[xbrlKey][contextKey];\r\n        delete instance[xbrlKey][unitKey];\r\n        delete instance[xbrlKey]._attributes;\r\n        delete instance[xbrlKey]['link:schemaRef'];\r\n        delete instance[xbrlKey]['link:footnoteLink'];\r\n        this.setPeriodText(context);\r\n        this.setSegmentData(context);\r\n        this.setMeasureText(unit);\r\n        const map = new Map();\r\n        let factCounter = 0;\r\n        for (const key in instance[xbrlKey]) {\r\n            if (Array.isArray(instance[xbrlKey][key])) {\r\n                instance[xbrlKey][key].forEach((current: { _attributes: DeiAmendmentFlagAttributes; _text: string; }) => {\r\n                    const attributes = { ...current._attributes };\r\n                    const id = attributes.id ? attributes.id : `fact-identifier-${factCounter}`;\r\n                    delete attributes.id;\r\n                    map.set(id, {\r\n                        ...attributes,\r\n                        name: key,\r\n                        ix: id,\r\n                        id: `fact-identifier-${factCounter++}`,\r\n                        value: this.isFactHTML(current._text) ? this.updateValueToRemoveIDs(current._text) : current._text,\r\n                        isAmountsOnly: this.isFactAmountsOnly(current._text),\r\n                        isTextOnly: !this.isFactAmountsOnly(current._text),\r\n                        isNegativeOnly: this.isFactNegativeOnly(current._text),\r\n                        isHTML: this.isFactHTML(current._text),\r\n                        period: this.setPeriodInfo(attributes.contextRef, context),\r\n                        period_dates: this.setPeriodDatesInfo(attributes.contextRef, context),\r\n                        segment: this.setSegmentInfo(attributes.contextRef, context),\r\n                        measure: this.setMeasureInfo(attributes.unitRef, unit),\r\n                        scale: this.setScaleInfo(attributes.scale),\r\n                        decimals: this.setDecimalsInfo(attributes.decimals),\r\n                        sign: this.setSignInfo(attributes.sign),\r\n                        footnote: this.setFootnoteInfo(id, footnote),\r\n                        isEnabled: true,\r\n                        isHighlight: false,\r\n                        isSelected: false,\r\n                        filter: {\r\n                            content: this.getTextFromHTML(current._text),\r\n                        },\r\n                    });\r\n                });\r\n            } else {\r\n                const attributes = { ...instance[xbrlKey][key]._attributes };\r\n                const id = attributes.id ? attributes.id : `fact-identifier-${factCounter}`;\r\n                delete attributes.id;\r\n\r\n                map.set(id, {\r\n                    ...attributes,\r\n                    name: key,\r\n                    ix: id,\r\n                    id: `fact-identifier-${factCounter++}`,\r\n                    value: this.isFactHTML(instance[xbrlKey][key]._text) ? this.updateValueToRemoveIDs(instance[xbrlKey][key]._text) : instance[xbrlKey][key]._text,\r\n                    isAmountsOnly: this.isFactAmountsOnly(instance[xbrlKey][key]._text),\r\n                    isTextOnly: !this.isFactAmountsOnly(instance[xbrlKey][key]._text),\r\n                    isNegativeOnly: this.isFactNegativeOnly(instance[xbrlKey][key]._text),\r\n                    isHTML: this.isFactHTML(instance[xbrlKey][key]._text),\r\n                    period: this.setPeriodInfo(attributes.contextRef, context),\r\n                    period_dates: this.setPeriodDatesInfo(attributes.contextRef, context),\r\n                    segment: this.setSegmentInfo(attributes.contextRef, context),\r\n                    measure: this.setMeasureInfo(attributes.unitRef, unit),\r\n                    scale: this.setScaleInfo(attributes.scale),\r\n                    decimals: this.setDecimalsInfo(attributes.decimals),\r\n                    sign: this.setSignInfo(attributes.sign),\r\n                    footnote: this.setFootnoteInfo(id, footnote),\r\n                    isEnabled: true,\r\n                    isHighlight: false,\r\n                    isSelected: false,\r\n                    filter: {\r\n                        content: this.getTextFromHTML(instance[xbrlKey][key]._text),\r\n                    },\r\n                });\r\n            }\r\n        }\r\n        return map;\r\n    }\r\n\r\n    extractSections() {\r\n        return Object.keys(this.sections).map((current) => {\r\n            if (this.metaVersion >= '2.2') {\r\n                if (this.sections[current].menuCat) {\r\n                    this.sections[current].groupType = this.sections[current].menuCat;\r\n                }\r\n                return this.sections[current];\r\n            }\r\n            return this.sections[current];\r\n        });\r\n    }\r\n\r\n    extractFormInformation(meta: Meta) {\r\n        const metaCopy = Object.assign({}, meta);\r\n        delete metaCopy.report;\r\n        delete metaCopy.tag;\r\n        return metaCopy;\r\n    }\r\n\r\n    mergeMapandMeta() {\r\n\r\n        this.currentInstance.map.forEach((currentValue: {\r\n            name: string;\r\n            segment: [{ dimension: string, axis: string }];\r\n            references: reference[];\r\n            calculations: [{ label: string, value: string }];\r\n            labels: string[];\r\n            filter: { labels: string; definitions: string; };\r\n            balance: string;\r\n            xbrltype: Xbrltype | null;\r\n            localname: string | null;\r\n            nsuri: string | null;\r\n            presentation: string[] | null | undefined;\r\n        }) => {\r\n            if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')]) {\r\n                // add references (if any) to each individual fact\r\n                // including references via any dimension [name]\r\n                // including references via any member [name]\r\n                if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].auth_ref) {\r\n\r\n                    let references = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].auth_ref.map((current) => {\r\n                        return current;\r\n                    });\r\n\r\n                    if (currentValue.segment) {\r\n\r\n                        const dimensions = currentValue.segment.map((element: { dimension: string; }) => {\r\n                            if (element.dimension && this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')]) {\r\n                                return this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')].auth_ref ? this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')].auth_ref : null;\r\n                            }\r\n                        }).filter(Boolean)[0];\r\n\r\n                        const axis = currentValue.segment.map((element: { dimension: string; axis: string; }) => {\r\n                            if (element.dimension && this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')]) {\r\n                                return this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')].auth_ref ? this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')].auth_ref : null;\r\n                            }\r\n                        }).filter(Boolean)[0];\r\n\r\n                        references = references.concat(dimensions).concat(axis);\r\n                    }\r\n\r\n                    currentValue.references = [...new Set(references)].map((current) => {\r\n                        return this.std_ref[current];\r\n                    });\r\n                }\r\n\r\n                // add calculations (if any) to each individual fact\r\n                if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].calculation) {\r\n                    const tempCalculation = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].calculation;\r\n                    currentValue.calculations = [];\r\n                    for (const property in tempCalculation) {\r\n                        const result = this.sections.map(element => {\r\n                            if (element.role === property) {\r\n                                return [\r\n                                    {\r\n                                        label: 'Section',\r\n                                        value: element.longName\r\n                                    },\r\n                                    {\r\n                                        label: 'Weight',\r\n                                        value: this.getCalculationWeight(tempCalculation[property].weight)\r\n                                    },\r\n                                    {\r\n                                        'label': 'Parent',\r\n                                        value: this.getCalculationParent(tempCalculation[property].parentTag)\r\n                                    }\r\n                                ];\r\n                            }\r\n                        }).filter(Boolean);\r\n                        currentValue.calculations = currentValue.calculations.concat(result);\r\n                    }\r\n                } else {\r\n                    currentValue.calculations = [];\r\n                }\r\n\r\n                // add labels (if any) to each individual fact\r\n                if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].lang) {\r\n                    currentValue.labels = Object.keys(this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].lang).map((current) => {\r\n                        const oldObject = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].lang[current].role;\r\n                        const newObject = {};\r\n                        for (const property in oldObject) {\r\n\r\n                            const result = property.replace(/([A-Z])/g, ' $1');\r\n                            const finalResult = result.charAt(0).toUpperCase() + result.slice(1);\r\n                            Object.assign(newObject, { [finalResult]: oldObject[property] });\r\n                        }\r\n                        return newObject\r\n                    });\r\n\r\n                    currentValue.filter.labels = currentValue.labels.reduce((accumulator: string, current) => {\r\n                        const tempCurrent = { ...current };\r\n                        delete tempCurrent.documentation;\r\n                        return `${accumulator} ${Object.values(tempCurrent).join(' ')}`;\r\n\r\n                    }, '');\r\n\r\n                    currentValue.filter.definitions = currentValue.labels.reduce((accumulator, current: { Documentation: string; }) => {\r\n                        return `${accumulator} ${current.Documentation}`;\r\n                    }, '');\r\n                }\r\n\r\n                // add credit / debit\r\n                if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].crdr) {\r\n                    const balance = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].crdr;\r\n                    currentValue.balance = `${balance.charAt(0).toUpperCase()}${balance.slice(1)}`;\r\n                }\r\n\r\n                // add xbrltype\r\n                if (this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].xbrltype) {\r\n                    currentValue.xbrltype = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].xbrltype;\r\n                }\r\n\r\n                // add additional info to each individual fact\r\n                currentValue.localname = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].localname ? this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].localname : null;\r\n                currentValue.nsuri = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].nsuri ? this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].nsuri : null;\r\n                currentValue.presentation = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].presentation ? this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].presentation : null;\r\n                currentValue.xbrltype = this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].xbrltype ? this.currentInstance.metaInstance.tag[currentValue.name.replace(':', '_')].xbrltype : null;\r\n            }\r\n        });\r\n        // return map;\r\n    }\r\n\r\n    prepareXHTML() {\r\n        this.currentInstance.xhtmls.forEach((current) => {\r\n            if (current.xhtml) {\r\n                let $ = cheerio.load(current.xhtml, {});\r\n                $ = this.fixImages($);\r\n                $ = this.fixLinks($);\r\n                $ = this.hiddenFacts($);\r\n                $ = this.redLineFacts($);\r\n                $ = this.excludeFacts($);\r\n                const updates = this.attributeFacts($, this.currentInstance.map, current.slug);\r\n                current.xhtml = updates.xhtml;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    fixImages($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundImagesArray = Array.from($('img'));\r\n        foundImagesArray.forEach((current) => {\r\n            if (!$(current).attr('src')?.startsWith('data:')) {\r\n                const imageSlug = $(current).attr('src')?.substr($(current).attr('src')!.lastIndexOf('/') + 1);\r\n                $(current).attr('src', `${this.absolute}${imageSlug}`);\r\n                $(current).attr('loading', 'lazy');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundImagesArray.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.fixImages() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    fixLinks($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundLinksArray = Array.from($('[data-link],[href]'));\r\n        foundLinksArray.forEach((current) => {\r\n            if (Object.prototype.hasOwnProperty.call(current.attribs, 'href')) {\r\n                if (current.attribs.href.startsWith('http://') ||\r\n                    current.attribs.href.startsWith('https://') ||\r\n                    current.attribs.href.startsWith('#')) {\r\n                    // already an absolute url, just add tabindex=18\r\n                    $(current).attr('tabindex', '18');\r\n                } else {\r\n                    // create an absolute url, add tabindex=18\r\n                    $(current).attr('tabindex', '18');\r\n                    $(current).attr('href', `${this.absolute}${current.attribs.href}`);\r\n                }\r\n            }\r\n            if (Object.prototype.hasOwnProperty.call(current.attribs, 'data-link')) {\r\n                $(current).attr('tabindex', '18');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundLinksArray.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.fixLinks() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    hiddenFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundElements = Array.from($('[style*=\"-ix-hidden\"]')).slice(0, 1000);\r\n        foundElements.forEach((current) => {\r\n            const updatedStyle = Object.values($(current).css([\"-sec-ix-hidden\", \"-esef-ix-hidden\"]) as {}).filter(Boolean)[0];\r\n            const hiddenElement = $(`#${updatedStyle}`);\r\n            if ($(hiddenElement).length) {\r\n                // we now create an entirely new element based on the innerHTML\r\n                // of current, and the attributes of hiddenElement\r\n                const cheerioElement = $(`<${$(hiddenElement).prop('tagName')?.toLowerCase().replace(`:`, `\\\\:`)}>`);\r\n                for (const key in $(hiddenElement).attr()) {\r\n                    $(cheerioElement).attr(key, $(hiddenElement).attr(key));\r\n                }\r\n                $(cheerioElement).attr('isadditionalitemsonly', 'true');\r\n                $(cheerioElement).attr('ishiddenelement', 'true');\r\n                $(cheerioElement).html($(current).text());\r\n                $(hiddenElement).removeAttr('id');\r\n                $(hiddenElement).removeAttr('contextref');\r\n                $(hiddenElement).removeAttr('name');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundElements.length\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.hiddenFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    redLineFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundElements = Array.from($('[style*=\"-ix-redline\"]'));\r\n        if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n            if (!PRODUCTION) {\r\n                const log: Logger<ILogObj> = new Logger();\r\n                log.debug(`\\nRedline Found: ${foundElements.length}`);\r\n            }\r\n            foundElements.forEach((current) => {\r\n                const updatedStyle = Object.values($(current).css([\"-sec-ix-redline\", \"-esef-ix-redline\"]) as {}).filter(Boolean)[0];\r\n                if (updatedStyle === \"true\") {\r\n                    $(current).attr(\"redline\", 'true');\r\n                }\r\n            });\r\n        }\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundElements.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.redLineFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    excludeFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundElements = Array.from($('[style*=\":exclude\"]'));\r\n        foundElements.forEach((current) => {\r\n            $(current).addClass('no-hover');\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundElements.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.excludeFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    attributeFacts($: cheerio.CheerioAPI, map: Map<string, SingleFact>, currentSlug: string) {\r\n        const startPerformance = performance.now();\r\n\r\n        const foundElements = Array.from($(`[contextRef]`));\r\n\r\n        foundElements.forEach((current) => {\r\n            $(current).attr(\"selected-fact\", 'false');\r\n            $(current).attr(\"hover-fact\", 'false');\r\n            $(current).attr(\"continued-fact\", 'false');\r\n            $(current).closest('table').length ? $(current).attr(\"inside-table\", 'true') : $(current).attr(\"inside-table\", 'false');\r\n\r\n            if ($(current).attr('contextref') && $(current).attr('id')) {\r\n\r\n                $(current).attr('ix', $(current).attr('id'));\r\n                $(current).attr('id', this.updateMap($(current)?.attr('ix') as string, $(current), currentSlug));\r\n            }\r\n            if (!$(current).prop('tagName').toLowerCase().endsWith(\"continuation\") &&\r\n                $(current).attr(\"continuedat\")\r\n            ) {\r\n                $(current).attr(\"continued-main-fact\", 'true');\r\n            }\r\n\r\n            if ($(current).attr('contextref') && !$(current).attr('id')) {\r\n                // for the facts in the html that have no ids...\r\n                const getByNameAndContextRef = (searchContextref: string | undefined, searchName: string | undefined) => {\r\n                    for (const [key, value] of this.currentInstance.map.entries()) {\r\n                        if (value.contextRef === searchContextref && value.name === searchName) {\r\n                            return key;\r\n                        }\r\n                    }\r\n                };\r\n                const mapKey = getByNameAndContextRef($(current).attr('contextref'), $(current).attr('name'));\r\n                if (mapKey) {\r\n\r\n                    $(current).attr('ix', mapKey);\r\n                    $(current).attr('id', mapKey);\r\n                    this.updateMap($(current)?.attr('ix') as string, $(current), currentSlug);\r\n                } else {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.error(`Fact [name] && [contextRef] could not be located in the Map Object.`);\r\n                }\r\n            }\r\n            $(current).wrap(`<span></span>`);\r\n        });\r\n        // TODO is this a good idea?\r\n        // $(`${namespace}\\\\:header`).remove();\r\n        const endPerformance = performance.now();\r\n        if (!PRODUCTION) {\r\n            const items = foundElements.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`\\nFetchAndMerge.attributeFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n\r\n        return { xhtml: $.html(), map };\r\n    }\r\n\r\n    updateMap(ix: string, element: cheerio.Cheerio<cheerio.Element>, currentSlug: string) {\r\n        this.currentInstance.map.set(\r\n            ix,\r\n            {\r\n                ...this.currentInstance.map.get(ix),\r\n                raw: element.text(),\r\n                format: element.attr('format') ? element.attr('format') : null,\r\n                isAdditional: element.parents().prop('tagName').toLowerCase().endsWith(':hidden'),\r\n                isCustom: (element.attr('name')?.split(':')[0].toLowerCase() === this.customPrefix),\r\n                isAmountsOnly: element.prop('tagName')?.split(':')[1].toLowerCase() === 'nonfraction',\r\n                isTextOnly: element.prop('tagName')?.split(':')[1].toLowerCase() === 'nonnumeric',\r\n                isNegativeOnly: element.attr('sign') === '-',\r\n                file: currentSlug,\r\n                scale: element.attr('scale') ? this.setScaleInfo(element.attr('scale') as unknown as number) : null,\r\n                continuedIDs: []\r\n            });\r\n\r\n        return this.currentInstance.map.get(ix).id;\r\n    }\r\n\r\n    updateValueToRemoveIDs(input: string) {\r\n        const $ = cheerio.load(input, { xml: false });\r\n        $('[id]').each(function () {\r\n            $(this).removeAttr('id');\r\n        });\r\n        // we also wrap the entirity of the html in a simple div\r\n        $('body ').wrapInner('<div></div>');\r\n        return $.html('body');\r\n    }\r\n\r\n    isFactAmountsOnly(input: string) {\r\n        return /^-?\\d+\\d*$/.test(input);\r\n    }\r\n\r\n    isFactNegativeOnly(input: string) {\r\n        return this.isFactAmountsOnly(input) && input.startsWith('-');\r\n    }\r\n\r\n    isFactHTML(input: string) {\r\n        return /<\\/?[a-z][\\s\\S]*>/i.test(input);\r\n    }\r\n\r\n    getTextFromHTML(input: string) {\r\n        if (this.isFactHTML(input)) {\r\n            const $ = cheerio.load(input);\r\n            return $.text();\r\n        }\r\n        return input;\r\n    }\r\n\r\n    setPeriodText(context: Context[]) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        context?.forEach((current) => {\r\n            if (current.period) {\r\n                if (current.period.instant) {\r\n                    const date = new Date(current.period.instant._text);\r\n                    current.period._array = [`${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`];\r\n                    current.period._text = `As of ${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;\r\n\r\n                } else if (current.period.startDate && current.period.endDate) {\r\n                    const startDate = new Date(current.period.startDate._text);\r\n                    const endDate = new Date(current.period.endDate._text);\r\n\r\n                    const yearDiff = endDate.getFullYear() - startDate.getFullYear();\r\n                    const monthDiff = endDate.getMonth() - startDate.getMonth() + (yearDiff * 12);\r\n                    current.period._array = [\r\n                        `${startDate.getMonth() + 1}/${startDate.getDate()}/${startDate.getFullYear()}`,\r\n                        `${endDate.getMonth() + 1}/${endDate.getDate()}/${endDate.getFullYear()}`\r\n                    ];\r\n                    if (monthDiff <= 0) {\r\n                        current.period._text = `${startDate.getMonth() + 1}/${startDate.getDate()}/${startDate.getFullYear()} - ${endDate.getMonth() + 1}/${endDate.getDate()}/${endDate.getFullYear()}`;\r\n                    } else {\r\n                        current.period._text = `${monthDiff} months ending ${endDate.getMonth() + 1}/${endDate.getDate()}/${endDate.getFullYear()}`;\r\n                    }\r\n                } else {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.error(`\\nFact Period is NEITHER Instant or Start / End`);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    setPeriodInfo(contextRef: string, context: [Context]) {\r\n        // we go through and find the 'id' in context that equals contextRef \r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.period) {\r\n            return factContext.period._text;\r\n        }\r\n    }\r\n\r\n    setPeriodDatesInfo(contextRef: string, context: [Context]) {\r\n        // we go through and find the 'id' in context that equals contextRef \r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.period) {\r\n            return factContext.period._array;\r\n        }\r\n    }\r\n\r\n    setSegmentData(context: Context | undefined) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        context.forEach((current) => {\r\n            if (current.entity && current.entity.segment) {\r\n                current.entity.segment.data = Object.keys(current.entity.segment).map((key) => {\r\n                    if (Array.isArray(current.entity.segment[key])) {\r\n                        return current.entity.segment[key].map((segment: { _attributes: { dimension: string; }; _text: string; }) => {\r\n                            return {\r\n                                axis: segment._attributes.dimension,\r\n                                dimension: segment._text,\r\n                                type: key.endsWith('explicitMember') ? 'explicit' : 'implicit'\r\n                            }\r\n                        });\r\n                    } else {\r\n                        return {\r\n                            axis: current.entity.segment[key]._attributes.dimension,\r\n                            dimension: current.entity.segment[key]._text ?\r\n                                current.entity.segment[key]._text :\r\n                                current.entity.segment[key][Object.keys(current.entity.segment[key]).filter(element => !element.startsWith('_'))[0]]?._text,\r\n                            type: key.endsWith('explicitMember') ?\r\n                                'explicit' :\r\n                                'implicit',\r\n                            value: !key.endsWith('explicitMember') ?\r\n                                current.entity.segment[key][Object.keys(current.entity.segment[key])[1]]._text :\r\n                                null\r\n                        };\r\n                    }\r\n                });\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    setSegmentInfo(contextRef: string, context: [Context]) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.entity && factContext.entity.segment) {\r\n            return factContext.entity.segment.data;\r\n        }\r\n    }\r\n\r\n    setMeasureText(unit: Units[] | undefined) {\r\n        unit = Array.isArray(unit) ? unit : [unit];\r\n        unit.forEach((current: { measure: { _text: string; }; _text: string; divide: { unitNumerator: { measure: { _text: string; }; }; unitDenominator: { measure: { _text: string; }; }; }; }) => {\r\n            if (current && current.measure) {\r\n                const measure = current.measure._text.includes(':') ?\r\n                    current.measure._text.split(':')[1].toUpperCase() :\r\n                    current.measure._text.toUpperCase();\r\n                current._text = measure;\r\n\r\n            } else if (current && current.divide) {\r\n                const numerator = current.divide.unitNumerator.measure._text.includes(':') ?\r\n                    current.divide.unitNumerator.measure._text.split(':')[1].toUpperCase() :\r\n                    current.divide.unitNumerator.measure._text.toUpperCase();\r\n\r\n                const denominator = current.divide.unitDenominator.measure._text.includes(':') ?\r\n                    current.divide.unitDenominator.measure._text.split(':')[1].toUpperCase() :\r\n                    current.divide.unitDenominator.measure._text.toUpperCase();\r\n\r\n                current._text = `${numerator} / ${denominator}`;\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    setMeasureInfo(unitRef: string, unit: Units) {\r\n        if (unit) {\r\n            const factUnit = Array.isArray(unit) ? unit.find((element: { _attributes: { id: string; }; }) => {\r\n                return element._attributes.id === unitRef;\r\n            }) : [unit].find((element: { _attributes: { id: string; }; }) => {\r\n                return element._attributes.id === unitRef;\r\n            });\r\n\r\n            if (\r\n                factUnit &&\r\n                (Object.prototype.hasOwnProperty.call(factUnit, 'measure') || Object.prototype.hasOwnProperty.call(factUnit, 'divide'))\r\n            ) {\r\n                return factUnit._text;\r\n            }\r\n        }\r\n    }\r\n\r\n    setScaleInfo(scale: number) {\r\n        if (scale) {\r\n            const scaleOptions = {\r\n                0: \"Zero\",\r\n                1: \"Tens\",\r\n                2: \"Hundreds\",\r\n                3: \"Thousands\",\r\n                4: \"Ten thousands\",\r\n                5: \"Hundred thousands\",\r\n                6: \"Millions\",\r\n                7: \"Ten Millions\",\r\n                8: \"Hundred Millions\",\r\n                9: \"Billions\",\r\n                10: \"Ten Billions\",\r\n                11: \"Hundred Billions\",\r\n                12: \"Trillions\",\r\n                \"-1\": \"Tenths\",\r\n                \"-2\": \"Hundredths\",\r\n                \"-3\": \"Thousandths\",\r\n                \"-4\": \"Ten Thousandths\",\r\n                \"-5\": \"Hundred Thousandths\",\r\n                \"-6\": \"Millionths\"\r\n            };\r\n            return scaleOptions[scale];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setDecimalsInfo(decimals: string) {\r\n        if (decimals) {\r\n            const decimalsOptions = {\r\n                \"-1\": \"Tens\",\r\n                \"-2\": \"Hundreds\",\r\n                \"-3\": \"Thousands\",\r\n                \"-4\": \"Ten thousands\",\r\n                \"-5\": \"Hundred thousands\",\r\n                \"-6\": \"Millions\",\r\n                \"-7\": \"Ten Millions\",\r\n                \"-8\": \"Hundred Millions\",\r\n                \"-9\": \"Billions\",\r\n                \"-10\": \"Ten Billions\",\r\n                \"-11\": \"Hundred Billions\",\r\n                \"-12\": \"Trillions\",\r\n                1: \"Tenths\",\r\n                2: \"Hundredths\",\r\n                3: \"Thousandths\",\r\n                4: \"Ten Thousandths\",\r\n                5: \"Hundred Thousandths\",\r\n                6: \"Millionths\"\r\n            };\r\n            return decimalsOptions[decimals];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setSignInfo(sign: string) {\r\n        if (sign) {\r\n            const signOptions = {\r\n                '-': 'Negative',\r\n                '+': 'Positive'\r\n            };\r\n            return signOptions[sign];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setFootnoteInfo(id: string, footnotes: {\r\n        \"link:loc\": LinkLOC[],\r\n        \"link:footnote\": LinkFootnote[];\r\n        \"link:footnoteArc\": LinkFootnoteArc[];\r\n    }) {\r\n        if (footnotes && footnotes['link:footnoteArc']) {\r\n            const factFootnote = Array.isArray(footnotes['link:footnoteArc']) ? footnotes['link:footnoteArc'].find((element) => {\r\n                return element._attributes['xlink:from'] === id;\r\n            }) : [footnotes['link:footnoteArc']].find((element) => {\r\n                return element._attributes['xlink:from'] === id;\r\n            });\r\n            if (factFootnote) {\r\n                if (footnotes['link:footnote']) {\r\n                    if (Array.isArray(footnotes['link:footnote'])) {\r\n\r\n                        const actualFootnote = footnotes['link:footnote']?.find((element) => {\r\n                            return element._attributes.id === factFootnote._attributes['xlink:to'];\r\n                        });\r\n                        return actualFootnote?._text;\r\n                    } else {\r\n                        // TODO we need way more cases\r\n                        if (!Array.isArray(footnotes['link:footnote']._text)) {\r\n                            return footnotes['link:footnote']._text;\r\n                        } else if (Array.isArray(footnotes['link:footnote']._text)) {\r\n                            return footnotes['link:footnote']._text.join('');\r\n                        } else if (footnotes['link:footnote']['xhtml:span']) {\r\n                            return footnotes['link:footnote']['xhtml:span']._text;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getCalculationWeight(weight: number) {\r\n        if (weight) {\r\n            return weight > 0 ?\r\n                `Added to parent(${weight.toFixed(2)})` :\r\n                `Substracted from parent(${weight.toFixed(2)})`\r\n        }\r\n        return 'Not Available.';\r\n    }\r\n\r\n    getCalculationParent(parent: string) {\r\n        if (parent) {\r\n            return parent.replace('_', ':');\r\n        }\r\n        return 'Not Available.';\r\n    }\r\n}","/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment\r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\n\r\nimport { FetchAndMerge } from '../fetch-merge';\r\n\r\nself.onmessage = ({ data }) => {\r\n    const fetchAndMerge = new FetchAndMerge(data);\r\n    fetchAndMerge.init().then(data => {\r\n        self.postMessage(data);\r\n    });\r\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [783], () => (__webpack_require__(7588)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.\" + \"0324a6e294b9fe34ba88\" + \".min.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t549: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkixviewer_2\"] = self[\"webpackChunkixviewer_2\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","input","this","absolute","partial","map","params","customPrefix","instance","std_ref","init","XHTMLandInstance","addInstance","Promise","all","fetchXHTML","fetchInstance","then","allResponses","errors","filter","element","Object","prototype","hasOwnProperty","call","length","error","message","current","forEach","index","currentInstance","xhtmls","loaded","xhtml","xml","mergeAllResponses","sections","fetchMeta","fetchSummary","metaVersion","version","options","values","MyReports","Report","reduce","accumulator","MenuCategory","Position","ShortName","_attributes","fact","name","contextRef","additional","find","shortName","_text","uniqueAnchor","file","baseRef","firstAnchor","findIndex","children","push","sort","first","second","data","promises","resolve","fetch","url","headers","response","status","text","Error","toString","doc","catch","allXHTML","metalinks","json","XHTMLSlug","substr","lastIndexOf","instanceKeys","keys","join","split","includes","instanceObjects","report","assign","slug","replace","xmlSlugs","xmlUrls","xmlSlug","metaInstance","Map","summary","JSON","parse","compact","FilingSummary","indexOf","splice","xmlInstances","includeSections","buildInitialMap","extractSections","formInformation","extractFormInformation","mergeMapandMeta","nsprefix","prepareXHTML","prefix","endsWith","getInstancePrefix","xbrlKey","contextKey","unitKey","context","unit","footnote","setPeriodText","setSegmentData","setMeasureText","factCounter","key","Array","isArray","attributes","id","set","ix","value","isFactHTML","updateValueToRemoveIDs","isAmountsOnly","isFactAmountsOnly","isTextOnly","isNegativeOnly","isFactNegativeOnly","isHTML","period","setPeriodInfo","period_dates","setPeriodDatesInfo","segment","setSegmentInfo","measure","setMeasureInfo","unitRef","scale","setScaleInfo","decimals","setDecimalsInfo","sign","setSignInfo","setFootnoteInfo","isEnabled","isHighlight","isSelected","content","getTextFromHTML","menuCat","groupType","meta","metaCopy","tag","currentValue","auth_ref","references","dimensions","dimension","Boolean","axis","concat","Set","calculation","calculations","property","result","role","label","longName","getCalculationWeight","weight","getCalculationParent","parentTag","lang","labels","oldObject","newObject","finalResult","charAt","toUpperCase","slice","tempCurrent","documentation","definitions","Documentation","crdr","balance","xbrltype","localname","nsuri","presentation","$","fixImages","fixLinks","hiddenFacts","redLineFacts","excludeFacts","updates","attributeFacts","performance","now","from","attr","startsWith","imageSlug","attribs","href","updatedStyle","css","hiddenElement","cheerioElement","prop","toLowerCase","html","removeAttr","foundElements","redline","addClass","currentSlug","closest","updateMap","mapKey","searchContextref","searchName","entries","getByNameAndContextRef","wrap","get","raw","format","isAdditional","parents","isCustom","continuedIDs","each","wrapInner","test","instant","date","Date","_array","getMonth","getDate","getFullYear","startDate","endDate","yearDiff","monthDiff","factContext","entity","type","divide","numerator","unitNumerator","denominator","unitDenominator","factUnit","footnotes","actualFootnote","toFixed","parent","self","onmessage","FetchAndMerge","postMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","r","d","definition","o","defineProperty","enumerable","f","e","chunkId","u","miniCssF","g","globalThis","Function","window","obj","Symbol","toStringTag","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","p","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop"],"sourceRoot":""}