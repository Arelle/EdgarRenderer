{"version":3,"file":"fetch-merge.bundle.b6398e0c407dfc8576b4.min.js","mappings":"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","sources":["webpack://ixviewer-2/webpack/runtime/chunk loaded","webpack://ixviewer-2/webpack/runtime/startup chunk dependencies","webpack://ixviewer-2/./src/ts/constants/constants.ts","webpack://ixviewer-2/./src/ts/fetch-merge/merge-data-utils.ts","webpack://ixviewer-2/./src/ts/fetch-merge/fetch-merge.ts","webpack://ixviewer-2/./src/ts/helpers/utils.ts","webpack://ixviewer-2/./src/ts/workers/workers.ts","webpack://ixviewer-2/webpack/bootstrap","webpack://ixviewer-2/webpack/runtime/compat get default export","webpack://ixviewer-2/webpack/runtime/define property getters","webpack://ixviewer-2/webpack/runtime/ensure chunk","webpack://ixviewer-2/webpack/runtime/get javascript chunk filename","webpack://ixviewer-2/webpack/runtime/get mini-css chunk filename","webpack://ixviewer-2/webpack/runtime/hasOwnProperty shorthand","webpack://ixviewer-2/webpack/runtime/make namespace object","webpack://ixviewer-2/webpack/runtime/publicPath","webpack://ixviewer-2/webpack/runtime/importScripts chunk loading","webpack://ixviewer-2/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(397).then(next);\n};","/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment\r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\n\r\nimport { Reference, SingleFact } from \"../interface/fact\";\r\nimport { FormInformation } from \"../interface/form-information\";\r\nimport { Meta } from \"../interface/meta\";\r\nimport { Section } from \"../interface/meta\";\r\n\r\nexport const Constants: {\r\n\tversion: string,\r\n\tfeatureSet: string,\r\n\tscrollPosition: string,\r\n\thoverOption: boolean,\r\n\tgetHTMLAttributes: object,\r\n\tgetPaginationPerPage: number,\r\n\tgetHtmlOverallFactsCount: string | null,\r\n\tgetMetaSourceDocuments: Array<{}>,\r\n\tgetInstanceFiles: Array<{\r\n\t\tcurrent: boolean,\r\n\t\tformInformation: {\r\n\t\t\taxisCustom: number,\r\n\t\t\taxisStandard: number,\r\n\t\t\tbaseTaxonomies: { [key: string]: number },\r\n\t\t\tcontextCount: number,\r\n\t\t\tdts: { [key: string]: { [key: string]: Array<string> } },\r\n\t\t\telementCount: number,\r\n\t\t\tentityCount: 1,\r\n\t\t\thidden: { [key: string]: number },\r\n\t\t\tkeyCustom: number,\r\n\t\t\tkeyStandard: number,\r\n\t\t\tmemberCustom: number,\r\n\t\t\tmemberStandard: number,\r\n\t\t\tnsprefix: string,\r\n\t\t\tnsuri: string,\r\n\t\t\tsegmentCount: number,\r\n\t\t\tunitcount: number,\r\n\t\t},\r\n\t\tinstance: number,\r\n\t\tmap: Map<string, SingleFact>,\r\n\t\tmetaInstance: Meta,\r\n\t\txhtmls: Array<{\r\n\t\t\tcurrent: boolean,\r\n\t\t\tloaded: boolean,\r\n\t\t\tslug: string,\r\n\t\t\turl: string,\r\n\t\t\txhtml: string,\r\n\t\t}>,\r\n\t\txmlSlug: Array<string>,\r\n\t\txmlUrls: Array<string>,\r\n\t}>,\r\n\tgetInlineFiles: Array<{\r\n\t\tcurrent: boolean,\r\n\t\tloaded: boolean,\r\n\t\tslug: string,\r\n\t\tdropdown?: boolean,\r\n\t\ttable?: boolean\r\n\t}>,\r\n\tgetFormInformation: FormInformation,\r\n\tgetStdRef: { [key: string]: Reference },\r\n\tsetSections: (sections:Section[]) => void,\r\n\tsections: Section[],\r\n\tgetSectionsFromSessionStorage: () => Section[],\r\n\tgetMetaReportsArray: Array<{}>,\r\n\tgetMetaTags: Array<{}>,\r\n\tgetMetaCustomPrefix: null | string,\r\n\tgetMetaDts: object,\r\n\tgetMetaDocuments: () => object,\r\n\tgetScrollPosition: () => number,\r\n\tgetNavBarsHeight: () => number | undefined,\r\n} = {\r\n\r\n\tversion: \"24.2\",\r\n\tfeatureSet: \"plus\",\r\n\r\n\tscrollPosition: typeof window !== 'undefined' && window.localStorage.getItem(\"scrollPosition\") || \"start\",\r\n\r\n\thoverOption: typeof window !== 'undefined' && window.localStorage.getItem(\"hoverOption\") === \"true\" || false,\r\n\r\n\tgetHTMLAttributes: {},\r\n\r\n\tgetPaginationPerPage: 10,\r\n\r\n\tgetHtmlOverallFactsCount: null,\r\n\r\n\tgetMetaSourceDocuments: [],\r\n\r\n\tgetMetaTags: [],\r\n\r\n\tgetInstanceFiles: [],\r\n\r\n\tgetInlineFiles: [],\r\n\r\n\tsetSections: (sections: Array<Section>) => {\r\n\t\tif (sections) {\r\n\t\t\tConstants.sections = sections;\r\n\t\t\tsessionStorage.setItem('sections', JSON.stringify(sections));\r\n\t\t}\r\n\t},\r\n\r\n\tsections: [],\r\n\tgetSectionsFromSessionStorage: () => {\r\n\t\tconst sectionsFromLocal = sessionStorage.getItem('sections');\r\n\t\tif (sectionsFromLocal) {\r\n\t\t\treturn JSON.parse(sectionsFromLocal || '[]');\r\n\t\t}\r\n\t},\r\n\r\n\tgetStdRef: {},\r\n\r\n\tgetFormInformation: {},\r\n\r\n\tgetMetaCustomPrefix: null,\r\n\r\n\tgetMetaDts: null,\r\n\r\n\tgetMetaDocuments: (input: string) => {\r\n\t\tif (input && typeof input === \"string\") {\r\n\t\t\treturn Constants.getMetaDts && Constants.getMetaDts[input]\r\n\t\t\t\t? Constants.getMetaDts[input]\r\n\t\t\t\t: null;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetScrollPosition: () => {\r\n\t\tconst currentScrollPosition = document.getElementById('dynamic-xbrl-form')!.scrollTop as number;\r\n\t\treturn currentScrollPosition;\r\n\t},\r\n\r\n\tgetNavBarsHeight: () => {\r\n\t\treturn document.querySelector<HTMLElement>('div[id=\"topNavs\"]')?.offsetHeight || 0;\r\n\t}\r\n\r\n};\r\n","import { Report, Section, SectionFact } from '../interface/meta';\r\nimport { convertToSelector } from \"../helpers/utils\";\r\n\r\n/**\r\n * Description\r\n * @param {any} filingSummary:any\r\n * @param {any} metaLinksReports:any\r\n * @returns {any} => Flatter array of metalinks reports (section items).\r\n */\r\nexport const buildSectionsArrayFlatter = (filingSummary, metaLinksReports, metaVersion: string) => {\r\n    // 'sections' and 'reports' are synonymous here\r\n    const filingSummaryReports = filingSummary.MyReports.Report;\r\n    let filingSummaryInputFiles = filingSummary.InputFiles.File;\r\n    if (!Array.isArray(filingSummaryInputFiles)) filingSummaryInputFiles = [filingSummaryInputFiles];\r\n\r\n    const reportsContainStatements = filingSummaryReports\r\n        .filter(r => r.MenuCategory)\r\n        .map(r => r.MenuCategory && r.MenuCategory._text.toLowerCase())\r\n        .some((menuCategory: string) => {\r\n            return menuCategory == 'statement' || 'statements';\r\n        })\r\n\r\n    const addInstanceProps = (section: Section) => {\r\n        // Get Doc Name for instance header for sections\r\n        const isHtmIsh = (fileName: string) => {\r\n            return fileName.includes('.htm') || fileName.includes('.html') || fileName.includes('.xhtml');\r\n        }\r\n        const reportFileInfo = filingSummaryInputFiles.filter(file => {\r\n            if (file._attributes && file._attributes?.original && file._text && isHtmIsh(file._text)) {\r\n                return section.instanceHtm.includes(file._attributes.original)\r\n            }\r\n        });\r\n        if (reportFileInfo.length) {\r\n            section.instanceDocName = reportFileInfo[0]._attributes.doctype;\r\n        } else {\r\n            console.error(`Cannot find instance file in FilingsSummary inputfiles`);\r\n        }\r\n        return section;\r\n    }\r\n\r\n    const addFactProps = (section: Section) => {\r\n        section.fact = getFactAttrsFromAnchorProps(section);\r\n        const mrFact = section.fact;\r\n        if (mrFact?.file  && mrFact?.ancestors && mrFact?.name) {\r\n            // if an ancestor is a fact name eg \"sbs:SbsefOrglStrDescTextBlock\", need to dress as name attribute\r\n            const handleSpecialAncestors = mrFact.ancestors.map((a: string) => {\r\n                if (a.includes(':')) {\r\n                    if (a.includes('ix:continuation')) return ''; // skip continuation ancestors\r\n                    return `[name=\"${a}\"]`\r\n                } else {\r\n                    return a;\r\n                }\r\n            });\r\n            const ancestorsRelevant = handleSpecialAncestors.reverse().filter((a:string) => a !== \"html\").join(' ');\r\n            section.inlineFactSelector = `section[filing-url=\"${mrFact.file}\"] > ${ancestorsRelevant} [name=\"${mrFact.name}\"][contextref=\"${mrFact.contextRef}\"]`;\r\n        }\r\n        return section;\r\n    }\r\n\r\n    const sectionsArray = metaLinksReports.map((metaReport: Report) => {\r\n        let section: Section = metaReport;\r\n        if (Number(metaVersion) <= 2.1 || !section.menuCat) {\r\n            section.menuCat = section.subGroupType || section.groupType;\r\n        }\r\n        if (metaReport.menuCat && metaReport.shortName) {\r\n            section = addInstanceProps(section);\r\n            section = addFactProps(section);\r\n            section.menuCatMapped = mapCategoryName(section.menuCat, reportsContainStatements);\r\n            section.domId = `sectionDoc-${convertToSelector(section.instanceDocName, false)}`\r\n\r\n            return section;\r\n        } else {\r\n            console.error('cannot determine section menuCat');\r\n        }\r\n    }).filter((section: Section) => section?.fact && section.menuCatMapped);\r\n\r\n    return sectionsArray;\r\n}\r\n\r\nconst getFactAttrsFromAnchorProps = (section: Section) => {\r\n    let fact: SectionFact = {};\r\n    fact.instance = section.instance; // number\r\n    // fact.menuCat = metaReport.menuCat;\r\n    if (section.uniqueAnchor) {\r\n        fact.name = section.uniqueAnchor.name;\r\n        fact.contextRef = section.uniqueAnchor.contextRef;\r\n        fact.file = section.uniqueAnchor.baseRef;\r\n        fact.ancestors = section.uniqueAnchor.ancestors;\r\n    } else if (section.firstAnchor) {\r\n        fact.name = section.firstAnchor.name;\r\n        fact.contextRef = section.firstAnchor.contextRef;\r\n        fact.file = section.firstAnchor.baseRef;\r\n        fact.ancestors = section.firstAnchor.ancestors;\r\n    } else {\r\n        /* DOC: \"As I recall, the reason for the anchors computed during rendering was that \r\n                some internal rendering process detail gets lost that neither filing summary.xml \r\n                nor metalinks.json could preserve (I think it had to do with how chrome will insert \r\n                elements like <tbody> if they were missing in the input…?), but since I can’t \r\n                remember what that might be (it’s certainly not obvious) go ahead and try.\" -WH email 4/1/2024 \r\n        */\r\n        fact = null;\r\n    }\r\n    return fact;\r\n}\r\n\r\n/**\r\n * Description\r\n * @param {any} input:string\r\n * @returns {any} => (string) mapped menu category name || 'INCOMPLETE SECTIONS DATA!'\r\n * @description use only when there are no 'statement' menu categories\r\n */\r\nconst mapCategoryName = (input: string, isStandard: boolean) => {\r\n    const lowerCaseKey = input.toLowerCase();\r\n    /*\r\n        'When the FilingSummary does not have any ‘statement’ category reports for an instance, then the following mapping should be used.  \r\n        “Reports” is generic and covers all the other things that don’t need their reports grouped into levels of detail.  \r\n        “Statements” used to be the general case (2008-2020) but now they are becoming the special case.' - WH Mar 29, 2024\r\n    */\r\n    const noStatementCatNameMap = {\r\n        \"cover\": \"Reports\",\r\n        \"document\": \"Reports\",\r\n        // \"statement\": n/a\r\n        // \"Statements\": n/a\r\n        \"disclosure\": \"Reports\",\r\n        \"notes\": \"Reports\",\r\n        \"policies\": \"Reports\", /* very unlikely to happen */\r\n        \"tables\": \"Reports\", /* very unlikely to happen */\r\n        \"details\": \"Details\", /* example here http://172.18.85.157:8082/ix-wh/oef24/oef05/out/FilingSummary.htm# */\r\n        \"prospectus\": \"Prospectus\",\r\n        \"rr_summaries\": \"RR Summaries\", /* example here http://172.18.85.157:8082/ix-wh/oef24/oef13/out/FilingSummary.htm we no longer make fancy menus for these */\r\n        \"fee_exhibit\": \"RR Summaries\",\r\n        \"risk/return\": \"RR Summaries\"\r\n    };\r\n    const standardCatNameMap = {\r\n        \"cover\": \"Cover\",\r\n        \"document\": \"Document & Entity Information\",\r\n        \"statement\": \"Financial Statements\",\r\n        \"statements\": \"Financial Statements\",\r\n        \"disclosure\": \"Notes to the Financial Statements\",\r\n        \"notes\": \"Notes to Financial Statements\",\r\n        \"policies\": \"Accounting Policies\",\r\n        \"tables\": \"Notes Tables\",\r\n        \"details\": \"Notes Details\",\r\n        \"prospectus\": \"Prospectus\",\r\n        \"rr_summaries\": \"RR Summaries\",\r\n        \"fee_exhibit\": \"RR Summaries\",\r\n        \"risk/return\": \"RR Summaries\"\r\n    };\r\n    if (isStandard) {\r\n        if (Object.prototype.hasOwnProperty.call(standardCatNameMap, lowerCaseKey)) {\r\n            return standardCatNameMap[lowerCaseKey];\r\n        } else {\r\n            console.info(`standardCatNameMap doesn't contain key: %c${lowerCaseKey}`, \"color: deepskyblue\")\r\n        }\r\n        } else {\r\n        if (Object.prototype.hasOwnProperty.call(noStatementCatNameMap, lowerCaseKey)) {\r\n            return noStatementCatNameMap[lowerCaseKey];\r\n        } else {\r\n            console.info(`noStatementCatNameMap doesn't contain key: %c${lowerCaseKey}`, \"color: deepskyblue\")\r\n        }\r\n    }\r\n};\r\n","import * as cheerio from 'cheerio';\r\nimport * as convert from 'xml-js';\r\nimport { Meta, Xbrltype, reference } from '../interface/meta';\r\nimport { FetchedInstance } from '../interface/instance';\r\nimport { Context, DeiAmendmentFlagAttributes, Instance, LinkFootnote, LinkFootnoteArc, LinkLOC, Units } from '../interface/instance';\r\nimport { Section } from '../interface/meta';\r\nimport { Reference, SingleFact } from '../interface/fact';\r\nimport { Logger, ILogObj } from 'tslog';\r\nimport { cleanSubstring } from '../helpers/utils';\r\nimport { buildSectionsArrayFlatter } from './merge-data-utils';\r\n\r\n/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment\r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\nexport class FetchAndMerge {\r\n    private absolute: string;\r\n    private params: {\r\n        doc: string,\r\n        'doc-file': string,\r\n        hostName: string,\r\n        redline: boolean,\r\n        metalinks: string,\r\n        'metalinks-file': string,\r\n        fact: string,\r\n        summary: string,\r\n    };\r\n    private customPrefix: undefined | string;\r\n    private currentInstance: Array<{\r\n        current: boolean;\r\n        formInformation: {\r\n            axisCustom: number;\r\n            axisStandard: number;\r\n            baseTaxonomies: { [key: string]: number; };\r\n            contextCount: number;\r\n            dts: { [key: string]: { [key: string]: Array<string>; }; };\r\n            elementCount: number;\r\n            entityCount: 1;\r\n            hidden: { [key: string]: number; };\r\n            keyCustom: number;\r\n            keyStandard: number;\r\n            memberCustom: number;\r\n            memberStandard: number;\r\n            nsprefix: string;\r\n            nsuri: string;\r\n            segmentCount: number;\r\n            unitcount: number;\r\n        };\r\n        instance: number;\r\n        map: Map<string, SingleFact>;\r\n        metaInstance: Meta;\r\n        xhtmls: Array<{\r\n            current: boolean;\r\n            loaded: boolean;\r\n            slug: string;\r\n            url: string;\r\n            xhtml: string;\r\n        }>;\r\n        xmlSlug: Array<string>;\r\n        xmlUrls: Array<string>;\r\n    }> | undefined;\r\n    private std_ref;\r\n    private sections: Array<Section>;\r\n    private metaVersion: string | undefined;\r\n    private instances;\r\n    constructor(input: {\r\n        absolute: string,\r\n        params: {\r\n            doc: string,\r\n            'doc-file': string,\r\n            hostName: string,\r\n            redline: boolean,\r\n            metalinks: string,\r\n            'metalinks-file': string,\r\n        },\r\n        instance: number | null,\r\n        std_ref: { [key: string]: Reference }\r\n\r\n    }) {\r\n        this.absolute = input.absolute;\r\n        this.partial = input.partial;\r\n        this.map = input.map;\r\n        this.params = input.params;\r\n        this.customPrefix = input.customPrefix;\r\n        this.instances = input.instance;\r\n        this.std_ref = input.std_ref;\r\n    }\r\n\r\n    init() {\r\n\r\n        /**\r\n         * Description\r\n         * @param {any} instances\r\n         * @param {any} initialLoad=false\r\n         * @returns {\r\n         *  instance: {},\r\n         *  sections: {},\r\n         *  std_ref: string\r\n         * }\r\n         */\r\n        const XHTMLandInstance = (instances, initialLoad = false) => {\r\n            return Promise.all([\r\n                this.fetchXHTML(), // .htm\r\n                this.fetchInstancesXmls(), // .xml(s)\r\n            ]).then((allResponses) => {\r\n                const errors = allResponses.filter(element => element ? Object.prototype.hasOwnProperty.call(element, 'error') : false);\r\n                if (errors.length) {\r\n                    const errorMessages = errors.map(current => current.message);\r\n                    return {\r\n                        all: { error: true, message: errorMessages }\r\n                    };\r\n                }\r\n                allResponses[0].forEach((current, index) => {\r\n                    this.currentInstance.xhtmls[index].loaded = true;\r\n                    this.currentInstance.xhtmls[index].xhtml = current.xhtml;\r\n                });\r\n                this.currentInstance.xml = (allResponses[1] as Instance);\r\n                this.mergeAllResponses(initialLoad);\r\n\r\n                const all = {\r\n                    instance: (initialLoad ? instances.instance : instances),\r\n                    // sections: this.sections,\r\n                    std_ref: this.std_ref\r\n                }\r\n                if (this.sections) {\r\n                    all.sections = this.sections;\r\n                }\r\n\r\n                return {\r\n                    all\r\n                }\r\n            })\r\n        };\r\n\r\n        const MetaandSummary = () => {\r\n            return Promise.all([\r\n                this.fetchMeta(),\r\n                this.fetchSummary(),\r\n            ]).then((allResponses) => {\r\n                const metalinks = allResponses[0];\r\n                const filingSummary = allResponses[1];\r\n\r\n                this.metaVersion = metalinks.version;\r\n                this.std_ref = metalinks.std_ref;\r\n                if (allResponses.some((element) => element.error)) {\r\n                    const messageIndex = allResponses.find((element) => element.error);\r\n                    return {\r\n                        all: { error: true, message: [messageIndex.message] }\r\n                    }\r\n                } else {\r\n                    this.currentInstance = metalinks.instance?.filter(element => element.current)[0];\r\n                    const metaLinksSections = Object.values(metalinks.sections); // ingoring keys R1, R2, ...\r\n\r\n                    // iterate over FilingSummary.xml Reports to build sections, adding data from metalinks\r\n                    this.sections = buildSectionsArrayFlatter(filingSummary, metaLinksSections, this.metaVersion);\r\n                }\r\n                return Promise.all([\r\n                    XHTMLandInstance(metalinks, true)\r\n                ]).then(data => {\r\n                    return data[0];\r\n                })\r\n            });\r\n        };\r\n        if (this.instances !== null) {\r\n            // switching instance\r\n            this.currentInstance = this.instances.filter(element => element.current)[0];\r\n            return XHTMLandInstance(this.instances);\r\n        } else {\r\n            // initial load\r\n            return MetaandSummary();\r\n        }\r\n    }\r\n\r\n    decodeWorkstationXmlInHtml(isWorkstation: boolean, html: string, closingXml: string) {\r\n        if (!isWorkstation) return html; // not running on SEC EDGAR workstation which encodes xml in HTML\r\n        if (!html.substring(0,100).toLowerCase().includes(\"<html><head>\")) {\r\n             if (html.includes(\"<title>EDGAR SEC Workstation Login</title>\")) {\r\n                  console.error(\"Workstation requires logging in\");\r\n                  window.alert(\"Workstation requires logging in\");\r\n                  return \"\";\r\n             }\r\n             return html; // it's xml, not html\r\n        }\r\n        // snip extraneous html from beginning and end of resopnse which is present in versions of files on workstation\r\n        // only 5 encodings are used in xml\r\n        html = html.replaceAll('&lt;', '<');\r\n        html = html.replaceAll('&gt;', '>');\r\n        html = html.replaceAll('&quot;', '\"');\r\n        html = html.replaceAll('&apos;', '\\'');\r\n        html = html.replaceAll('&amp;', '&');\r\n        return html.substring(html.indexOf(\"<?xml version=\"), html.indexOf(closingXml) + closingXml.length)\r\n    }\r\n\r\n    /**\r\n     * Description\r\n     * @returns {any} => current .htm file (xhtml file)\r\n     */\r\n    fetchXHTML() {\r\n        const promises = this.currentInstance?.xhtmls.map((current: { url: string }) => {\r\n            return new Promise((resolve) => {\r\n                const isWorkstation = current.url.includes(\"DisplayDocument.do?\");\r\n                let ixvUrl = current.url;\r\n                if (isWorkstation) {\r\n                    if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n                        ixvUrl = ixvUrl.replace('.htm', '_ix2.htm');\r\n                    } else {\r\n                        ixvUrl = ixvUrl.replace('.htm', '_ix1.htm');\r\n                    }\r\n                }\r\n                fetch(ixvUrl, {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/xhtml+xml\"\r\n                    },\r\n                    mode: 'no-cors',\r\n                    credentials: 'include'\r\n                }).then((response) => {\r\n                    if (response.status >= 200 && response.status <= 299) {\r\n                        return response.text();\r\n                    } else {\r\n                        throw Error(`${response.status.toString()}, Could not find \"${this.params.doc}\"`);\r\n                    }\r\n                }).then((data) => {\r\n                    // on SEC EDGAR workstation xhtml is encoded like this: <HTML><HEAD><TITLE> ... &lt;?xml ...\r\n                    const xhtmlData = this.decodeWorkstationXmlInHtml(isWorkstation, data, \"</html>\");\r\n                    resolve({ xhtml: xhtmlData });\r\n                }).catch((error) => {\r\n                    resolve({ error: true, message: error });\r\n                })\r\n            });\r\n        });\r\n        return Promise.all(promises).then((allXHTML: Array<{ xhtml: string, index: number }>) => {\r\n            return allXHTML;\r\n        });\r\n    }\r\n\r\n    fetchMeta(): Promise<{\r\n        error?: boolean,\r\n        message?: string,\r\n        instance?: Array<{\r\n            current: boolean,\r\n            instance: number,\r\n            xhtmls: Array<{\r\n                slug: string,\r\n                url: string,\r\n                current: boolean,\r\n                loaded: boolean\r\n            }>,\r\n            xmlSlug: Array<string>,\r\n            xmlUrls: Array<string>,\r\n            metaInstance: Array<Instance>\r\n        }>,\r\n        meta?: Meta,\r\n        inlineFiles?: Array<{ slug: string, current: boolean, loaded: boolean }>\r\n    }> {\r\n        return new Promise((resolve) => {\r\n            let jsonUrl = this.params.metalinks;\r\n            const isWorkstation = jsonUrl.includes(\"DisplayDocument.do?\");\r\n            if (isWorkstation) {\r\n                if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n                    jsonUrl = jsonUrl.replace('MetaLinks.json', 'PrivateMetaLinks.json')\r\n                }\r\n            }\r\n            return fetch(jsonUrl, { credentials: 'include' }).then((response) => {\r\n                if (response.status >= 200 && response.status <= 299) {\r\n                    return response.json();\r\n                } else {\r\n                    throw Error(response.status.toString());\r\n                }\r\n            }).then((data) => {\r\n\r\n                let XHTMLSlug = this.params.doc.substring(this.params.doc.lastIndexOf('/') + 1);\r\n                if (XHTMLSlug.startsWith(\"DisplayDocument.do\") || XHTMLSlug.startsWith(\"view.html\")) {\r\n                    XHTMLSlug = this.params.doc.substring(this.params.doc.lastIndexOf('filename=') + 9);\r\n                }\r\n                const instanceFileNames = Object.keys(data.instance).join().split(/[ ,]+/);\r\n                let sections = {}\r\n                if (instanceFileNames.includes(XHTMLSlug)) {\r\n                    const instanceObjects = Object.keys(data.instance).map((currentInstance, instanceIndex) => {\r\n\r\n                        // Sections\r\n                        Object.keys(data.instance[currentInstance].report).forEach((report) => {\r\n                            data.instance[currentInstance].report[report].instanceIndex = instanceIndex; // why?\r\n                        });\r\n                        Object.values(data.instance[currentInstance].report).forEach(report => {\r\n                            report.instanceHtm = currentInstance;\r\n                        });\r\n                        sections = Object.assign(sections, data.instance[currentInstance].report);\r\n\r\n                        /* \r\n                            if instance key has space, e.g. \r\n                                \"doc1.htm doc2.htm\": {...}, \r\n                            it is known as multi doc.\r\n                        */\r\n                        const xhtmls = currentInstance.split(' ').map((element) => {\r\n                            return {\r\n                                slug: element,\r\n                                url: this.params.doc.replace(this.params['doc-file'], element),\r\n                                current: currentInstance.split(' ').includes(XHTMLSlug) && element === this.params['doc-file'],\r\n                                loaded: false\r\n                            };\r\n                        });\r\n\r\n                        const xmlSlugs = xhtmls.map(element => element.slug.replace('.htm', '_htm.xml'));\r\n                        const xmlUrls = xhtmls.map(element => this.params.metalinks.replace('MetaLinks.json', element.slug.replace('.htm', '_htm.xml')));\r\n                        return {\r\n                            instanceHtm: currentInstance,\r\n                            instance: instanceIndex, // Why?\r\n                            xhtmls: xhtmls,\r\n                            current: currentInstance.split(' ').includes(XHTMLSlug),\r\n                            xmlSlug: xmlSlugs,\r\n                            xmlUrls: xmlUrls,\r\n                            metaInstance: Object.assign(data.instance[currentInstance]),\r\n                            map: new Map()\r\n                        }\r\n                    });\r\n                    delete data.instance;\r\n                    resolve({ instance: instanceObjects, ...data, sections, version: data.version });\r\n                } else {\r\n                    // this may occur when transferring a filing from one domain to another.  Not sure how to fix..\r\n                    if (!PRODUCTION) {\r\n                        console.log('instanceFileNames does not include XHTMLSlug. fetch-merge > fetchMeta())')\r\n                    }\r\n                    throw Error('Incorrect MetaLinks.json Instance');\r\n                }\r\n                resolve(data);\r\n            }).catch((error) => resolve({ error: true, message: `${error}, Could not find \"${this.params.metalinks}\"` }))\r\n        });\r\n    }\r\n\r\n    fetchSummary() {\r\n        return new Promise((resolve) => {\r\n            let xmlUrl = this.params.summary;\r\n            const isWorkstation = xmlUrl.includes(\"DisplayDocument.do?\");\r\n            if (isWorkstation) {\r\n                if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n                    xmlUrl = xmlUrl.replace('FilingSummary.xml', 'PrivateFilingSummary.xml')\r\n                }\r\n            }\r\n            return fetch(xmlUrl, { credentials: 'include' }).then((response) => {\r\n                if (response.status >= 200 && response.status <= 299) {\r\n                    return response.text();\r\n                } else {\r\n                    throw Error(response.status.toString());\r\n                }\r\n            }).then((data) => {\r\n                const xmlData = this.decodeWorkstationXmlInHtml(isWorkstation, data, \"</FilingSummary>\");\r\n                resolve(JSON.parse(convert.xml2json(xmlData as unknown as string, { compact: true })).FilingSummary);\r\n            }).catch((error) => {\r\n                resolve({ error: true, message: `${error}, Could not find \"${this.params.summary}\"` })\r\n            })\r\n        });\r\n    }\r\n\r\n    fetchInstancesXmls() {\r\n        const promises = this.currentInstance?.xmlUrls.map((xmlUrl: string) => {\r\n            let _xmlUrl = xmlUrl;\r\n            const isWorkstation = _xmlUrl.includes(\"DisplayDocument.do?\");\r\n            if (isWorkstation) {\r\n                // If methods from HelpersUrl are used here some very strange bugs occur, such as window and localStorage undefined.\r\n                if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n                    _xmlUrl = _xmlUrl.replace('_htm.xml', '_ht2.xml')\r\n                } else {\r\n                    _xmlUrl = _xmlUrl.replace('_htm.xml', '_ht1.xml')\r\n                }\r\n            }\r\n            return new Promise((resolve) =>\r\n                fetch(_xmlUrl).then((response) => {\r\n                    if (response.status >= 200 && response.status <= 299) {\r\n                        return response.text();\r\n                    } else {\r\n                        const indexOf = this.currentInstance.xmlUrls.indexOf(xmlUrl);\r\n                        if (indexOf >= 0) {\r\n                            this.currentInstance.xmlUrls.splice(indexOf, 1);\r\n                        }\r\n                        throw Error(`${response.status.toString()}`);\r\n                    }\r\n                }, { credentials: 'include' }).then((data) => {\r\n                    const xmlData = this.decodeWorkstationXmlInHtml(isWorkstation, data, \"</xbrl>\");\r\n                    resolve({ instance: xmlData });\r\n                }).catch((error) => {\r\n                    resolve({ error: true, message: `${error}, Could not find \"XML Instance Data\"` });\r\n                }\r\n            ));\r\n        });\r\n        return Promise.all(promises).then((xmlInstances: Array<FetchedInstance>) => {\r\n            const instance = xmlInstances.filter(element => element.instance);\r\n            if (instance && instance[0]) {\r\n                const fetchedXMlString = instance[0].instance;\r\n                const instanceXmlAsJsonCompact = JSON.parse(convert.xml2json(fetchedXMlString as unknown as string, { compact: true }));\r\n                if (instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"] && DEBUGJS) {\r\n                    const footnotesNode = instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"]\r\n                    // grab xml data as non compact object so element order is preserved.\r\n                    instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"].expanded = JSON.parse(convert.xml2json(fetchedXMlString as unknown as string, { compact: false }));\r\n                    instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"].orderedFootnoteDivs = footnotesNode.expanded.elements[0].elements;\r\n                    instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"].asXmlString = cleanSubstring(fetchedXMlString, '<link:footnoteLink', '</link:footnoteLink>');\r\n                    // footnotesNode.asXmlString = cleanSubstring(fetchedXMlString, '<link:footnoteLink', '</link:footnoteLink>').replaceAll('\\n', '');\r\n                    // footnotesNode.renderableXml = this.xmlToDom(fetchedXMlString);\r\n                }\r\n                // return instanceXmlAsJsonCompact.xbrl[\"link:footnoteLink\"].asXmlString\r\n                return instanceXmlAsJsonCompact;\r\n            } else {\r\n                return xmlInstances[0];\r\n            }\r\n        });\r\n    }\r\n\r\n    mergeAllResponses(\r\n        initialLoad: boolean\r\n    ) {\r\n        this.currentInstance.map = this.buildInitialFactMap(this.currentInstance.xml, this.currentInstance.xhtmls[0].slug);\r\n        if (initialLoad) {\r\n            this.sections = this.extractSections(); // not sure what this was for, except maybe adding .groupType\r\n        }\r\n        this.currentInstance.formInformation = this.extractFormInformation(this.currentInstance.metaInstance);\r\n        this.enrichFactMapWithMetalinksData();\r\n        this.customPrefix = this.currentInstance.metaInstance.nsprefix;\r\n        this.prepareXHTMLForCurrentInstance();\r\n        return;\r\n    }\r\n\r\n    buildInitialFactMap(instanceXml: Instance, fileSlug: string) {\r\n\r\n        const getInstancePrefix = (instance) => {\r\n            const options = Object.keys(instance).filter(element => element.endsWith(':xbrl'))[0];\r\n            return options ? options.split(':')[0] : false;\r\n        };\r\n        const prefix = getInstancePrefix(instanceXml);\r\n\r\n        const xbrlKey = prefix ? `${(prefix as string)}:xbrl` : 'xbrl';\r\n        const contextKey = prefix ? `${(prefix as string)}:context` : 'context';\r\n        const unitKey = prefix ? `${(prefix as string)}:unit` : 'unit';\r\n\r\n        const context = instanceXml[xbrlKey][contextKey];\r\n        const unit = instanceXml[xbrlKey][unitKey];\r\n        const footnote = instanceXml[xbrlKey]['link:footnoteLink'];\r\n\r\n        delete instanceXml[xbrlKey][contextKey];\r\n        delete instanceXml[xbrlKey][unitKey];\r\n        delete instanceXml[xbrlKey]._attributes;\r\n        delete instanceXml[xbrlKey]['link:schemaRef'];\r\n        delete instanceXml[xbrlKey]['link:footnoteLink'];\r\n        this.setPeriodText(context);\r\n        this.setSegmentData(context);\r\n        this.setMeasureText(unit);\r\n        const map = new Map();\r\n        let factCounter = 0;\r\n        for (const key in instanceXml[xbrlKey]) {\r\n            /* example set of keys on instance.xbrl\r\n                _attributes\r\n                link:schemaRef\r\n                context\r\n                unit\r\n                dei:AmendmentFlag\r\n                dei:DocumentPeriodEndDate\r\n                dei:DocumentFiscalPeriodFocus\r\n                dei:EntityCentralIndexKey\r\n                dei:CurrentFiscalYearEndDate\r\n                dei:EntityEmergingGrowthCompany\r\n                dei:DocumentType\r\n                dei:DocumentFiscalYearFocus\r\n                dei:EntityRegistrantName\r\n                dei:EntityCommonStockSharesOutstanding\r\n                i09203gd:Content4\r\n                link:footnoteLink\r\n            */\r\n            if (Array.isArray(instanceXml[xbrlKey][key])) { // this first block might handle multi instance filings.\r\n                instanceXml[xbrlKey][key].forEach((current: { _attributes: DeiAmendmentFlagAttributes; _text: string; }) => {\r\n                    const attributes = { ...current._attributes };\r\n                    const id = attributes.id ? attributes.id : `fact-identifier-${factCounter}`;\r\n                    delete attributes.id;\r\n                    map.set(id, {\r\n                        ...attributes,\r\n                        name: key,\r\n                        ix: id,\r\n                        id: `fact-identifier-${factCounter++}`,\r\n                        value: this.isFactHTML(current._text) ? this.updateValueToRemoveIDs(current._text) : current._text,\r\n                        isAmountsOnly: this.isFactAmountsOnly(current._text),\r\n                        isTextOnly: !this.isFactAmountsOnly(current._text),\r\n                        isNegativeOnly: this.isFactNegativeOnly(current._text),\r\n                        isHTML: this.isFactHTML(current._text),\r\n                        period: this.setPeriodInfo(attributes.contextRef, context),\r\n                        period_dates: this.setPeriodDatesInfo(attributes.contextRef, context),\r\n                        segment: this.setSegmentInfo(attributes.contextRef, context),\r\n                        measure: this.setMeasureInfo(attributes.unitRef, unit),\r\n                        scale: this.setScaleInfo(attributes.scale),\r\n                        decimals: this.setDecimalsInfo(attributes.decimals),\r\n                        sign: this.setSignInfo(attributes.sign),\r\n                        footnote: this.setFootnoteInfo(id, footnote),\r\n                        isEnabled: true,\r\n                        isHighlight: false,\r\n                        isSelected: false,\r\n                        filter: {\r\n                            content: this.getTextFromHTML(current._text),\r\n                        },\r\n                        file: fileSlug\r\n                    });\r\n                });\r\n            } else {\r\n                const attributes = { ...instanceXml[xbrlKey][key]._attributes };\r\n                const id = attributes.id ? attributes.id : `fact-identifier-${factCounter}`;\r\n                delete attributes.id;\r\n\r\n                map.set(id, {\r\n                    ...attributes,\r\n                    name: key,\r\n                    ix: id,\r\n                    id: `fact-identifier-${factCounter++}`,\r\n                    value: this.isFactHTML(instanceXml[xbrlKey][key]._text) ? this.updateValueToRemoveIDs(instanceXml[xbrlKey][key]._text) : instanceXml[xbrlKey][key]._text,\r\n                    isAmountsOnly: this.isFactAmountsOnly(instanceXml[xbrlKey][key]._text),\r\n                    isTextOnly: !this.isFactAmountsOnly(instanceXml[xbrlKey][key]._text),\r\n                    isNegativeOnly: this.isFactNegativeOnly(instanceXml[xbrlKey][key]._text),\r\n                    isHTML: this.isFactHTML(instanceXml[xbrlKey][key]._text),\r\n                    period: this.setPeriodInfo(attributes.contextRef, context),\r\n                    period_dates: this.setPeriodDatesInfo(attributes.contextRef, context),\r\n                    segment: this.setSegmentInfo(attributes.contextRef, context),\r\n                    measure: this.setMeasureInfo(attributes.unitRef, unit),\r\n                    scale: this.setScaleInfo(attributes.scale),\r\n                    decimals: this.setDecimalsInfo(attributes.decimals),\r\n                    sign: this.setSignInfo(attributes.sign),\r\n                    footnote: this.setFootnoteInfo(id, footnote),\r\n                    isEnabled: true,\r\n                    isHighlight: false,\r\n                    isSelected: false,\r\n                    filter: {\r\n                        content: this.getTextFromHTML(instanceXml[xbrlKey][key]._text),\r\n                    },\r\n                    file: fileSlug\r\n                });\r\n            }\r\n            // console.log('instanceXml[xbrlKey][key]', key, instanceXml[xbrlKey][key])\r\n        }\r\n        return map;\r\n    }\r\n\r\n    extractSections() {\r\n        return this.sections.map((section) => {\r\n\r\n            // groupType is used in Metalinks v2.1 (and presumably earlier) and was replaced by menuCat in 2.2\r\n            if (Number(this.metaVersion) >= 2.2) {\r\n                if (section.menuCat) {\r\n                    section.groupType = section.menuCat;\r\n                } \r\n            } \r\n            // else {\r\n            //     section.menuCat = section.subGroupType;\r\n            // }\r\n            return section;\r\n        });\r\n    }\r\n\r\n    extractFormInformation(meta: Meta) {\r\n        const metaCopy = Object.assign({}, meta);\r\n        delete metaCopy.report;\r\n        delete metaCopy.tag;\r\n        return metaCopy;\r\n    }\r\n\r\n    /**\r\n     * Description\r\n     * @returns {any} => updates instance fact map (this.currentInstance.map) with data from meta (this.currentInstance.metaInstance)\r\n     */\r\n    enrichFactMapWithMetalinksData() {\r\n        this.currentInstance?.map.forEach((currentFact: {\r\n            name: string;\r\n            segment: [{ dimension: string, axis: string }];\r\n            references: reference[];\r\n            calculations: [{ label: string, value: string }] | [];\r\n            labels: string[];\r\n            filter: { labels: string; definitions: string; };\r\n            balance: string;\r\n            xbrltype: Xbrltype | null;\r\n            localname: string | null;\r\n            nsuri: string | null;\r\n            presentation: string[] | null | undefined;\r\n        }) => {\r\n            /* \r\n                @Doc: Fact 'tags' in metalinks.json vs fact 'names' in instance and xhtmls files\r\n                facts are stored in metalinks.json under instance[<instanceName>].tags\r\n                Not sure why they are called 'tags'\r\n                Tags in xbrl speak are 'concepts', which are also qNames.\r\n                Some tag names looke like: \r\n                    dei_AmendmentDescription\r\n                They have an underscore, but in the instance and xhtml files they have colons. \r\n                    dei:AmendmentDescription\r\n            */\r\n            const factNameTag = currentFact.name.replace(':', '_');\r\n            const factObjectMl = this.currentInstance.metaInstance.tag[factNameTag]; // Ml being metalinks\r\n\r\n            if (factObjectMl) {\r\n\r\n                /* add references (if any) to each individual fact\r\n                including references via any dimension [name]\r\n                including references via any member [name] */\r\n                if (factObjectMl.auth_ref) {\r\n\r\n                    let references = factObjectMl.auth_ref.map((authRef) => {\r\n                        return authRef;\r\n                    });\r\n\r\n                    if (currentFact.segment) {\r\n                        const dimensions = currentFact.segment.map((element: { dimension: string; }) => {\r\n                            if (element.dimension && this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')]) {\r\n                                return this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')].auth_ref ? this.currentInstance.metaInstance.tag[element.dimension.replace(':', '_')].auth_ref : null;\r\n                            }\r\n                        }).filter(Boolean)[0];\r\n\r\n                        const axis = currentFact.segment.map((element: { dimension: string; axis: string; }) => {\r\n                            if (element.dimension && this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')]) {\r\n                                return this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')].auth_ref ? this.currentInstance.metaInstance.tag[element.axis.replace(':', '_')].auth_ref : null;\r\n                            }\r\n                        }).filter(Boolean)[0];\r\n\r\n                        references = references.concat(dimensions).concat(axis);\r\n                    }\r\n\r\n                    currentFact.references = [...new Set(references)].map((current) => {\r\n                        return this.std_ref[current];\r\n                    }).filter(Boolean);\r\n                    // this order specifically for Fact References\r\n                    // any other key => value will be ignored and not shown to the user\r\n                    const requiredOrder = [\r\n                        `Publisher`,\r\n                        `Name`,\r\n                        `Number`,\r\n                        `Chapter`,\r\n                        `Article`,\r\n                        `Number`,\r\n                        `Exhibit`,\r\n                        `Section`,\r\n                        `Subsection`,\r\n                        `Paragraph`,\r\n                        `Subparagraph`,\r\n                        `Sentence`,\r\n                        `Clause`,\r\n                        `Subclause`,\r\n                        `Example`,\r\n                        `Footnote`,\r\n                        `URI`,\r\n                        `URIDate`,\r\n                    ];\r\n                    currentFact.references = currentFact.references.map((singleReference) => {\r\n                        return Object.keys(singleReference).reduce((accumulator, current) => {\r\n                            const index = requiredOrder.findIndex(element => element === current);\r\n                            if (index !== -1) {\r\n                                const returnObject = {};\r\n                                returnObject[current] = singleReference[current];\r\n                                accumulator[index] = returnObject;\r\n                            }\r\n                            return accumulator;\r\n                        }, new Array(Object.keys(singleReference).length).fill(null)).filter(Boolean);\r\n                    });\r\n                }\r\n\r\n                // add calculations (if any) to each individual fact\r\n                if (factObjectMl.calculation) {\r\n                    // console.log('this.currentInstance.metaInstance', this.currentInstance.metaInstance)\r\n                    const tempFactCalculation = factObjectMl.calculation;\r\n                    currentFact.calculations = [];\r\n                    for (const factCalculationProp in tempFactCalculation) {\r\n                        const result = this.sections?.map(sectionElement => {\r\n                            if (sectionElement.role === factCalculationProp) {\r\n                                /*\r\n                                    Walter comment: \"Although I traced the root cause to a problem in entry point sbsef-fex, still, \r\n                                    user actions can cause this.sections to be unbound when switching from one instance to another via the “instance” menu.  \r\n                                    So, this section should probably make sure that this.sections is at least an empty list:\"\r\n                                */\r\n                                return [\r\n                                    {\r\n                                        label: 'Section',\r\n                                        value: sectionElement.longName\r\n                                    },\r\n                                    {\r\n                                        label: 'Weight',\r\n                                        value: this.getCalculationWeight(tempFactCalculation[factCalculationProp].weight)\r\n                                    },\r\n                                    {\r\n                                        'label': 'Parent',\r\n                                        value: this.getCalculationParent(tempFactCalculation[factCalculationProp].parentTag)\r\n                                    }\r\n                                ];\r\n                            }\r\n                        }).filter(Boolean);\r\n                        currentFact.calculations = currentFact.calculations.concat(result);\r\n                    }\r\n                } else {\r\n                    currentFact.calculations = [];\r\n                }\r\n\r\n                // add labels (if any) to each individual fact\r\n                if (factObjectMl.lang) {\r\n                    currentFact.labels = Object.keys(factObjectMl.lang).map((current) => {\r\n                        const oldObject = factObjectMl.lang[current].role;\r\n                        const newObject = {};\r\n                        for (const property in oldObject) {\r\n\r\n                            const result = property.replace(/([A-Z])/g, ' $1');\r\n                            const finalResult = result.charAt(0).toUpperCase() + result.slice(1);\r\n                            Object.assign(newObject, { [finalResult]: oldObject[property] });\r\n                        }\r\n                        return newObject\r\n                    });\r\n\r\n                    currentFact.filter.labels = currentFact.labels.reduce((accumulator: string, current) => {\r\n                        const tempCurrent = { ...current };\r\n                        delete tempCurrent.documentation;\r\n                        return `${accumulator} ${Object.values(tempCurrent).join(' ')}`;\r\n\r\n                    }, '');\r\n\r\n                    currentFact.filter.definitions = currentFact.labels.reduce((accumulator, current: { Documentation: string; }) => {\r\n                        return `${accumulator} ${current.Documentation}`;\r\n                    }, '');\r\n                }\r\n\r\n                // add credit / debit\r\n                if (factObjectMl.crdr) {\r\n                    const balance = factObjectMl.crdr;\r\n                    currentFact.balance = `${balance.charAt(0).toUpperCase()}${balance.slice(1)}`;\r\n                }\r\n\r\n                // add xbrltype\r\n                if (factObjectMl.xbrltype) {\r\n                    currentFact.xbrltype = factObjectMl.xbrltype;\r\n                }\r\n\r\n                // add additional info to each individual fact\r\n                currentFact.localname = factObjectMl.localname ? factObjectMl.localname : null;\r\n                currentFact.nsuri = factObjectMl.nsuri ? factObjectMl.nsuri : null;\r\n                currentFact.presentation = factObjectMl.presentation ? factObjectMl.presentation : null;\r\n                currentFact.xbrltype = factObjectMl.xbrltype ? factObjectMl.xbrltype : null;\r\n            }\r\n        });\r\n    }\r\n\r\n    prepareXHTMLForCurrentInstance() {\r\n        this.currentInstance.xhtmls.forEach((current) => {\r\n            if (current.xhtml) {\r\n                let $ = cheerio.load(current.xhtml, {});\r\n                $ = this.hiddenFacts($);\r\n                $ = this.fixImages($);\r\n                $ = this.fixLinks($);\r\n                // $ = this.hiddenFacts($);\r\n                $ = this.redLineFacts($);\r\n                $ = this.excludeFacts($);\r\n                const updates = this.attributeFacts($, this.currentInstance.map, current.slug);\r\n                current.xhtml = updates.xhtml;\r\n            }\r\n        });\r\n    }\r\n\r\n    fixImages($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundImagesArray = Array.from($('img'));\r\n        foundImagesArray.forEach((current) => {\r\n            if (!$(current).attr('src')?.startsWith('data:')) {\r\n                const imageSlug = $(current).attr('src')?.substr($(current).attr('src')!.lastIndexOf('/') + 1);\r\n                $(current).attr('src', `${this.absolute}${imageSlug}`);\r\n                $(current).attr('loading', 'lazy');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundImagesArray.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.fixImages() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    fixLinks($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundLinksArray = Array.from($('[data-link],[href]'));\r\n        foundLinksArray.forEach((current) => {\r\n            if (Object.prototype.hasOwnProperty.call(current.attribs, 'href')) {\r\n                if (current.attribs.href.startsWith('http://') ||\r\n                    current.attribs.href.startsWith('https://') ||\r\n                    current.attribs.href.startsWith('#')) {\r\n                    // already an absolute url, just add tabindex=18\r\n                    $(current).attr('tabindex', '18');\r\n\r\n                    // this anchor tag does not exsist in the current XHTML file\r\n                    if (current.attribs.href.startsWith('#') \r\n                        && current.attribs.href.slice(1) \r\n                        && $(`[id='${current.attribs.href.slice(1)}']`).length === 0\r\n                    ) {\r\n                        $(current).attr('xhtml-change', 'true');\r\n                    }\r\n                } else {\r\n                    // create an absolute url, add tabindex=18\r\n                    $(current).attr('tabindex', '18');\r\n                    $(current).attr('href', `${this.absolute}${current.attribs.href}`);\r\n                }\r\n            }\r\n            if (Object.prototype.hasOwnProperty.call(current.attribs, 'data-link')) {\r\n                $(current).attr('tabindex', '18');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundLinksArray.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.fixLinks() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    hiddenFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundElements = Array.from($('[style*=\"-ix-hidden\"]')).slice(0, 1000);\r\n\r\n        foundElements.forEach((current) => {\r\n            const updatedStyle = Object.values($(current).css([\"-sec-ix-hidden\", \"-esef-ix-hidden\"]) as {}).filter(Boolean)[0];\r\n            const hiddenElement = $(`#${updatedStyle}`);\r\n            if ($(hiddenElement).length) {\r\n                // console.log($(hiddenElement));\r\n                // we now create an entirely new element based on the innerHTML\r\n                // of current, and the attributes of hiddenElement\r\n                const cheerioElement = $(`<${$(hiddenElement).prop('tagName')?.toLowerCase().replace(`:`, `\\\\:`)}>`);\r\n                //const id = $(hiddenElement).attr('id');\r\n\r\n                for (const key in $(hiddenElement).attr()) {\r\n\r\n                    $(cheerioElement).attr(key, $(hiddenElement).attr(key));\r\n                }\r\n                $(cheerioElement).attr('isadditionalitemsonly', 'true');\r\n                $(cheerioElement).attr('ishiddenelement', 'true');\r\n                $(cheerioElement).html($(current).text());\r\n                $(hiddenElement).removeAttr('id');\r\n                $(hiddenElement).removeAttr('contextref');\r\n                $(hiddenElement).removeAttr('name');\r\n\r\n                //console.log($(cheerioElement).attr('id'));\r\n                $(current).html($(cheerioElement));\r\n                if ($(cheerioElement).attr('id') === 'id3VybDovL2RvY3MudjEvZG9jOjU1M2Q3M2I4N2RhYjQ2MzQ5ZjlmNTI3Y2YwNzZjMzlhL3NlYzo1NTNkNzNiODdkYWI0NjM0OWY5ZjUyN2NmMDc2YzM5YV82MS9mcmFnOmI0ZGUyZDM0ZWE4NTRjMTc4NmFjYWIyYzRjZWRiMmQ2L3RleHRyZWdpb246YjRkZTJkMzRlYTg1NGMxNzg2YWNhYjJjNGNlZGIyZDZfNDAwNTE_70ac34fc-cc35-4fb1-ad12-4d0f52202d63') {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.debug($(current).html());\r\n                }\r\n            } else {\r\n                const log: Logger<ILogObj> = new Logger();\r\n                log.debug('empty!');\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundElements.length\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.hiddenFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    /**\r\n     * Description\r\n     * @param {any} $:cheerio.CheerioAPI\r\n     * @returns {any}\r\n     */\r\n    redLineFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        let foundElements = [];\r\n        \r\n        ['redline', 'redact'].forEach((r) => {\r\n            foundElements = Array.from($('[style*=\"-ix-' + r + '\"]'));\r\n            \r\n            if (Object.prototype.hasOwnProperty.call(this.params, 'redline') && this.params.redline) {\r\n                if (!PRODUCTION) {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.debug(`ix-${r} styles Found: ${foundElements.length}`);\r\n                }\r\n                foundElements.forEach((current) => {\r\n                    const updatedStyle = Object.values($(current).css([\"-sec-ix-\" + r, \"-esef-ix-\" + r]) as {}).filter(Boolean)[0];\r\n                    if (updatedStyle === \"true\") {\r\n                        $(current).attr(r, 'true');\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundElements?.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.redLineFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    excludeFacts($: cheerio.CheerioAPI) {\r\n        const startPerformance = performance.now();\r\n        const foundElements = Array.from($('[style*=\":exclude\"]'));\r\n        foundElements.forEach((current) => {\r\n            $(current).addClass('no-hover');\r\n        });\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundElements.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.excludeFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n        return $;\r\n    }\r\n\r\n    attributeFacts($: cheerio.CheerioAPI, map: Map<string, SingleFact>, currentSlug: string) {\r\n        const startPerformance = performance.now();\r\n\r\n        const foundElements = Array.from($(`[contextRef]`));\r\n\r\n        foundElements.forEach((current) => {\r\n            $(current).attr(\"selected-fact\", 'false');\r\n            $(current).attr(\"hover-fact\", 'false');\r\n            $(current).attr(\"continued-fact\", 'false');\r\n            $(current).closest('table').length ? $(current).attr(\"inside-table\", 'true') : $(current).attr(\"inside-table\", 'false');\r\n\r\n            if ($(current).attr('contextref') && $(current).attr('id')) {\r\n\r\n                $(current).attr('ix', $(current).attr('id'));\r\n                $(current).attr('id', this.updateMap($(current)?.attr('ix') as string, $(current), currentSlug));\r\n            }\r\n            if (!$(current).prop('tagName').toLowerCase().endsWith(\"continuation\") &&\r\n                $(current).attr(\"continuedat\")\r\n            ) {\r\n                $(current).attr(\"continued-main-fact\", 'true');\r\n            }\r\n\r\n            if ($(current).attr('contextref') && !$(current).attr('id')) {\r\n                // for the facts in the html that have no ids...\r\n                const getByNameAndContextRef = (searchContextref: string | undefined, searchName: string | undefined) => {\r\n                    for (const [key, value] of this.currentInstance.map.entries()) {\r\n                        if (value.contextRef === searchContextref && value.name === searchName) {\r\n                            return key;\r\n                        }\r\n                    }\r\n                };\r\n                const mapKey = getByNameAndContextRef($(current).attr('contextref'), $(current).attr('name'));\r\n                if (mapKey) {\r\n\r\n                    $(current).attr('ix', mapKey);\r\n                    $(current).attr('id', mapKey);\r\n                    this.updateMap($(current)?.attr('ix') as string, $(current), currentSlug);\r\n                } else {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.error(`Fact [name] && [contextRef] could not be located in the Map Object.`);\r\n                }\r\n            }\r\n            $(current).wrap(`<span></span>`);\r\n        });\r\n        // TODO is this a good idea?\r\n        // $(`${namespace}\\\\:header`).remove();\r\n        const endPerformance = performance.now();\r\n        if (LOGPERFORMANCE) {\r\n            const items = foundElements.length;\r\n            const log: Logger<ILogObj> = new Logger();\r\n            log.debug(`FetchAndMerge.attributeFacts() completed in: ${(endPerformance - startPerformance).toFixed(2)}ms - ${items} items`);\r\n        }\r\n\r\n        return { xhtml: $.html(), map };\r\n    }\r\n\r\n    updateMap(ix: string, element: cheerio.Cheerio<cheerio.Element>, currentSlug: string) {\r\n        this.currentInstance.map.set(\r\n            ix,\r\n            {\r\n                ...this.currentInstance.map.get(ix),\r\n                raw: element.text(),\r\n                format: element.attr('format') ? element.attr('format') : null,\r\n                isAdditional: element.parents().prop('tagName').toLowerCase().endsWith(':hidden'),\r\n                isCustom: (element.attr('name')?.split(':')[0].toLowerCase() === this.customPrefix),\r\n                isAmountsOnly: element.prop('tagName')?.split(':')[1].toLowerCase() === 'nonfraction',\r\n                isTextOnly: element.prop('tagName')?.split(':')[1].toLowerCase() === 'nonnumeric',\r\n                isNegativeOnly: element.attr('sign') === '-',\r\n                file: currentSlug,\r\n                scale: element.attr('scale') ? this.setScaleInfo(element.attr('scale') as unknown as number) : null,\r\n                continuedIDs: []\r\n            });\r\n\r\n        return this.currentInstance.map.get(ix).id;\r\n    }\r\n\r\n    updateValueToRemoveIDs(input: string) {\r\n        const $ = cheerio.load(input, { xml: false });\r\n        $('[id]').each(function () {\r\n            $(this).removeAttr('id');\r\n        });\r\n        // we also wrap the entirity of the html in a simple div\r\n        $('body ').wrapInner('<div></div>');\r\n        return $.html('body');\r\n    }\r\n\r\n    isFactAmountsOnly(input: string) {\r\n        return /^-?\\d+\\d*$/.test(input);\r\n    }\r\n\r\n    isFactNegativeOnly(input: string) {\r\n        return this.isFactAmountsOnly(input) && input.startsWith('-');\r\n    }\r\n\r\n    isFactHTML(input: string) {\r\n        return /<\\/?[a-z][\\s\\S]*>/i.test(input);\r\n    }\r\n\r\n    getTextFromHTML(input: string) {\r\n        if (this.isFactHTML(input)) {\r\n            const $ = cheerio.load(input);\r\n            return $.text();\r\n        }\r\n        return input;\r\n    }\r\n\r\n    setPeriodText(context: Context[]) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        context?.forEach((current) => {\r\n            if (current.period) {\r\n                if (current.period.instant) {\r\n                    const date = new Date(current.period.instant._text);\r\n                    current.period._array = [`${date.getMonth() + 1}/${date.getUTCDate()}/${date.getFullYear()}`];\r\n                    current.period._text = `As of ${date.getMonth() + 1}/${date.getUTCDate()}/${date.getFullYear()}`;\r\n\r\n                } else if (current.period.startDate && current.period.endDate) {\r\n                    const startDate = new Date(current.period.startDate._text);\r\n                    const endDate = new Date(current.period.endDate._text);\r\n\r\n                    const yearDiff = endDate.getFullYear() - startDate.getFullYear();\r\n                    const monthDiff = endDate.getMonth() - startDate.getMonth() + (yearDiff * 12);\r\n                    current.period._array = [\r\n                        `${startDate.getMonth() + 1}/${startDate.getUTCDate()}/${startDate.getFullYear()}`,\r\n                        `${endDate.getMonth() + 1}/${endDate.getUTCDate()}/${endDate.getFullYear()}`\r\n                    ];\r\n                    if (monthDiff <= 0) {\r\n                        current.period._text = `${startDate.getMonth() + 1}/${startDate.getUTCDate()}/${startDate.getFullYear()} - ${endDate.getMonth() + 1}/${endDate.getUTCDate()}/${endDate.getFullYear()}`;\r\n                    } else {\r\n                        current.period._text = `${monthDiff} months ending ${endDate.getMonth() + 1}/${endDate.getUTCDate()}/${endDate.getFullYear()}`;\r\n                    }\r\n                } else {\r\n                    const log: Logger<ILogObj> = new Logger();\r\n                    log.error(`\\nFact Period is NEITHER Instant or Start / End`);\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    setPeriodInfo(contextRef: string, context: [Context]) {\r\n        // we go through and find the 'id' in context that equals contextRef\r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.period) {\r\n            return factContext.period._text;\r\n        }\r\n    }\r\n\r\n    setPeriodDatesInfo(contextRef: string, context: [Context]) {\r\n        // we go through and find the 'id' in context that equals contextRef\r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.period) {\r\n            return factContext.period._array;\r\n        }\r\n    }\r\n\r\n    setSegmentData(context: Context | undefined) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        context.forEach((current) => {\r\n            if (current.entity && current.entity.segment) {\r\n                current.entity.segment.data = Object.keys(current.entity.segment).map((key) => {\r\n                    if (Array.isArray(current.entity.segment[key])) {\r\n                        return current.entity.segment[key].map((segment: { _attributes: { dimension: string; }; _text: string; }) => {\r\n                            return {\r\n                                axis: segment._attributes.dimension,\r\n                                dimension: segment._text,\r\n                                type: key.endsWith('explicitMember') ? 'explicit' : 'implicit'\r\n                            }\r\n                        });\r\n                    } else {\r\n                        return {\r\n                            axis: current.entity.segment[key]._attributes.dimension,\r\n                            dimension: current.entity.segment[key]._text ?\r\n                                current.entity.segment[key]._text :\r\n                                current.entity.segment[key][Object.keys(current.entity.segment[key]).filter(element => !element.startsWith('_'))[0]]?._text,\r\n                            type: key.endsWith('explicitMember') ?\r\n                                'explicit' :\r\n                                'implicit',\r\n                            value: !key.endsWith('explicitMember') ?\r\n                                current.entity.segment[key][Object.keys(current.entity.segment[key])[1]]._text :\r\n                                null\r\n                        };\r\n                    }\r\n                });\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    setSegmentInfo(contextRef: string, context: [Context]) {\r\n        context = Array.isArray(context) ? context : [context];\r\n        const factContext = context?.find((element) => {\r\n            return element._attributes.id === contextRef;\r\n        });\r\n        if (factContext && factContext.entity && factContext.entity.segment) {\r\n            return factContext.entity.segment.data;\r\n        }\r\n    }\r\n\r\n    setMeasureText(unit: Units[] | undefined) {\r\n        unit = Array.isArray(unit) ? unit : [unit];\r\n        unit.forEach((current: { measure: { _text: string; }; _text: string; divide: { unitNumerator: { measure: { _text: string; }; }; unitDenominator: { measure: { _text: string; }; }; }; }) => {\r\n            if (current && current.measure) {\r\n                const measure = current.measure._text.includes(':') ?\r\n                    current.measure._text.split(':')[1].toUpperCase() :\r\n                    current.measure._text.toUpperCase();\r\n                current._text = measure;\r\n\r\n            } else if (current && current.divide) {\r\n                const numerator = current.divide.unitNumerator.measure._text.includes(':') ?\r\n                    current.divide.unitNumerator.measure._text.split(':')[1].toUpperCase() :\r\n                    current.divide.unitNumerator.measure._text.toUpperCase();\r\n\r\n                const denominator = current.divide.unitDenominator.measure._text.includes(':') ?\r\n                    current.divide.unitDenominator.measure._text.split(':')[1].toUpperCase() :\r\n                    current.divide.unitDenominator.measure._text.toUpperCase();\r\n\r\n                current._text = `${numerator} / ${denominator}`;\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    setMeasureInfo(unitRef: string, unit: Units) {\r\n        if (unit) {\r\n            const factUnit = Array.isArray(unit) ? unit.find((element: { _attributes: { id: string; }; }) => {\r\n                return element._attributes.id === unitRef;\r\n            }) : [unit].find((element: { _attributes: { id: string; }; }) => {\r\n                return element._attributes.id === unitRef;\r\n            });\r\n\r\n            if (\r\n                factUnit &&\r\n                (Object.prototype.hasOwnProperty.call(factUnit, 'measure') || Object.prototype.hasOwnProperty.call(factUnit, 'divide'))\r\n            ) {\r\n                return factUnit._text;\r\n            }\r\n        }\r\n    }\r\n\r\n    setScaleInfo(scale: number) {\r\n        if (scale) {\r\n            const scaleOptions = {\r\n                0: \"Zero\",\r\n                1: \"Tens\",\r\n                2: \"Hundreds\",\r\n                3: \"Thousands\",\r\n                4: \"Ten thousands\",\r\n                5: \"Hundred thousands\",\r\n                6: \"Millions\",\r\n                7: \"Ten Millions\",\r\n                8: \"Hundred Millions\",\r\n                9: \"Billions\",\r\n                10: \"Ten Billions\",\r\n                11: \"Hundred Billions\",\r\n                12: \"Trillions\",\r\n                \"-1\": \"Tenths\",\r\n                \"-2\": \"Hundredths\",\r\n                \"-3\": \"Thousandths\",\r\n                \"-4\": \"Ten Thousandths\",\r\n                \"-5\": \"Hundred Thousandths\",\r\n                \"-6\": \"Millionths\"\r\n            };\r\n            return scaleOptions[scale];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setDecimalsInfo(decimals: string) {\r\n        if (decimals) {\r\n            const decimalsOptions = {\r\n                \"-1\": \"Tens\",\r\n                \"-2\": \"Hundreds\",\r\n                \"-3\": \"Thousands\",\r\n                \"-4\": \"Ten thousands\",\r\n                \"-5\": \"Hundred thousands\",\r\n                \"-6\": \"Millions\",\r\n                \"-7\": \"Ten Millions\",\r\n                \"-8\": \"Hundred Millions\",\r\n                \"-9\": \"Billions\",\r\n                \"-10\": \"Ten Billions\",\r\n                \"-11\": \"Hundred Billions\",\r\n                \"-12\": \"Trillions\",\r\n                1: \"Tenths\",\r\n                2: \"Hundredths\",\r\n                3: \"Thousandths\",\r\n                4: \"Ten Thousandths\",\r\n                5: \"Hundred Thousandths\",\r\n                6: \"Millionths\"\r\n            };\r\n            return decimalsOptions[decimals];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    setSignInfo(sign: string) {\r\n        if (sign) {\r\n            const signOptions = {\r\n                '-': 'Negative',\r\n                '+': 'Positive'\r\n            };\r\n            return signOptions[sign];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Description\r\n     * @param {any} ftObj:object\r\n     * @param {any} result?:string|undefined\r\n     * @returns {any} concatenated text from all footnote nodes, joined by a ' '\r\n     */\r\n    accumulateFootnote(ftObj: object, result?: string | undefined) {\r\n        if (typeof(result) == \"undefined\") result = \"\";\r\n        const truncateFootnoteTo = 100;\r\n\r\n        if (result?.length > truncateFootnoteTo) {\r\n            result = result.substring(0, truncateFootnoteTo).substring(0, result.lastIndexOf(\" \") + 1);\r\n            return result += ' ...';\r\n        }\r\n\r\n        // let text = ''; //accumulate \"mixed-content\" text to apply after depth first descent\r\n        Object.keys(ftObj).forEach(node => {\r\n            if (node == \"_text\") {\r\n                result += ftObj[node] + ' ';\r\n            }\r\n            else if (Array.isArray(ftObj[node])) {\r\n                ftObj[node].forEach(childNode => {\r\n                    result = this.accumulateFootnote(childNode, result);\r\n                })\r\n            }\r\n            else if (node.substring(0,6) == \"xhtml:\") {\r\n                result = this.accumulateFootnote(ftObj[node], result);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Description\r\n     * @param {any} id:string\r\n     * @param {any} footnotes:{\"link:loc\":LinkLOC[]\r\n     * @param {any} \"link:footnote\":LinkFootnote[];\"link:footnoteArc\":LinkFootnoteArc[];}\r\n     * @param {string} asXmlString footnotes part of fetched xml text\r\n     * @returns {any} renderable footnote text (or xml string) to be displayed in fact modal\r\n     * todo: handle incoming footnotes.asXmlString or footnotes.xmlExpanded to show all content (in order) instead of just text\r\n     * todo: handle images, tables, ...other html elements (currently just concatenating text content)\r\n     * the above todos are WIP and are handled when useFetchedFootnoteXmlStrings is set to true.\r\n     */\r\n    setFootnoteInfo(id: string, footnotes: {\r\n        \"link:loc\": LinkLOC[],\r\n        \"link:footnote\": LinkFootnote[],\r\n        \"link:footnoteArc\": LinkFootnoteArc[],\r\n        \"asXmlString\": string,\r\n    }) {\r\n        if (footnotes && footnotes['link:footnoteArc']) {\r\n            const factFootnote = Array.isArray(footnotes['link:footnoteArc']) \r\n                ? footnotes['link:footnoteArc'].find((element) => element._attributes['xlink:from'] === id ) \r\n                : [footnotes['link:footnoteArc']].find((element) => element._attributes['xlink:from'] === id )\r\n            if (factFootnote) {\r\n                if (footnotes['link:footnote']) {\r\n                    if (Array.isArray(footnotes['link:footnote'])) {\r\n                        const actualFootnote = footnotes['link:footnote']?.find((element) => {\r\n                            return element._attributes.id === factFootnote._attributes['xlink:to'];\r\n                        });\r\n\r\n                        const useFetchedFootnoteXmlStrings = false;\r\n                        const useParsedFootnote = !useFetchedFootnoteXmlStrings;\r\n\r\n                        if (useParsedFootnote) {\r\n                            return this.accumulateFootnote(actualFootnote);\r\n                        }\r\n\r\n                        // Rest of this if block is WIP for rendering all div types in footnote cell\r\n\r\n                        // GO FIND PART OF footnotes.xmlString that corresponds to actual footnote\r\n                        // return that substring ... so you can render it in fact-pages.ts\r\n                        // we only need '<link:footnote ... > string for each footnote to render\r\n                        // find all <link:footnote ... > xml strings and put in array\r\n                        // then find the one that matches the xlink:to value with its id\r\n\r\n                        const startTagRegex = /<link:footnote /gi; \r\n                        let startTagResults = '';\r\n                        const footnoteStartIndices:number[] = [];\r\n                        while ( (startTagResults = startTagRegex.exec(footnotes.asXmlString)) ) {\r\n                            footnoteStartIndices.push(startTagResults.index);\r\n                        }\r\n\r\n                        const endTagRegex = /<\\/link:footnote>/gi; \r\n                        let endTagResults = '';\r\n                        const footnoteEndIndices:number[] = [];\r\n                        while ( (endTagResults = endTagRegex.exec(footnotes.asXmlString)) ) {\r\n                            footnoteEndIndices.push(endTagResults.index + ('</link:footnote>').length);\r\n                        }\r\n\r\n                        const footnotesAsXmlStrings:string[] = [];\r\n\r\n                        footnoteStartIndices.forEach((start, indexInArrayOfStarts) => {\r\n                            const pluckedFootnote = footnotes.asXmlString.substring(start, footnoteEndIndices[indexInArrayOfStarts]);\r\n                            footnotesAsXmlStrings.push(pluckedFootnote);\r\n                        })\r\n\r\n                        const relevantFootnoteAsXmlString = footnotesAsXmlStrings.find(fn => {\r\n                            return fn.indexOf(factFootnote._attributes['xlink:to']) != -1;\r\n                        })\r\n\r\n                        return relevantFootnoteAsXmlString;\r\n                    } else {\r\n                        // TODO we need way more cases\r\n                        if (!Array.isArray(footnotes['link:footnote']._text)) {\r\n                            return footnotes;\r\n                            // return footnotes['link:footnote']._text;\r\n                        } else if (Array.isArray(footnotes['link:footnote']._text)) {\r\n                            return footnotes['link:footnote']._text.join('');\r\n                        } else if (footnotes['link:footnote']['xhtml:span']) {\r\n                            return footnotes['link:footnote']['xhtml:span']._text;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getCalculationWeight(weight: number) {\r\n        if (weight) {\r\n            return weight > 0 ?\r\n                `Added to parent(${weight.toFixed(2)})` :\r\n                `Substracted from parent(${weight.toFixed(2)})`\r\n        }\r\n        return 'Not Available.';\r\n    }\r\n\r\n    getCalculationParent(parent: string) {\r\n        if (parent) {\r\n            return parent.replace('_', ':');\r\n        }\r\n        return 'Not Available.';\r\n    }\r\n}","/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment \r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\n\r\nimport { Constants } from \"../constants/constants\";\r\nimport DOMPurify from \"dompurify\";\r\n\r\nexport const cleanSubstring = (orig: string, from: string, to: string) => {\r\n    return orig.substring(orig.search(from), orig.search(to) + to.length);\r\n}\r\n\r\nexport const convertToSelector = (input: string, sanitize=true) => {\r\n    const normalizedSelector = input.replaceAll('/', '-')\r\n        .replaceAll(' ', '-')\r\n        .replaceAll('#', '-')\r\n        .replaceAll('.', '-')\r\n    if (sanitize)\r\n        return DOMPurify.sanitize(normalizedSelector);\r\n    else {\r\n        return normalizedSelector;\r\n    }\r\n}\r\n\r\n// WIP\r\nexport const xmlToDom = (xmlNode: Node): Node | null => {\r\n    \r\n    if (!PRODUCTION) {\r\n        console.log('node.nodeType', xmlNode.nodeType)\r\n        console.log('node', xmlNode)\r\n    }\r\n    if (xmlNode.nodeType === 1) { // Element node\r\n        const element = document.createElement(xmlNode.nodeName)\r\n\r\n        // add attributes\r\n        for (let i=0; i<xmlNode.attributes.length; i++) {\r\n            const attr = xmlNode.attributes[i];\r\n            element.setAttributeNS(attr.namespaceURI, attr.nodeName, attr.nodeValue);\r\n        }\r\n        \r\n        // recursively process child nodes\r\n        for (let i=0; i<xmlNode.childNodes.length; i++) {\r\n            const childNode = xmlToDom(xmlNode.childNodes[i]);\r\n            if (childNode) {\r\n                element.appendChild(childNode);\r\n            }\r\n        }\r\n\r\n        return element;\r\n    } else if (xmlNode.nodeType === 3) { // Text node\r\n        return document.createTextNode(xmlNode.nodeValue);\r\n    }\r\n    return null;\r\n}\r\n\r\n// WIP\r\nexport const findAllTagTypeInMarkupString = (markup: string, openTag: string, closeTag: string) => {\r\n    const allTags:string[] = [];\r\n\r\n    const startTagRegex = RegExp(openTag, 'gi') \r\n    let startTagResults = '';\r\n    const footnoteStartIndices:number[] = [];\r\n    while ( (startTagResults = startTagRegex.exec(markup)) ) {\r\n        footnoteStartIndices.push(startTagResults.index);\r\n    }\r\n\r\n    const endTagRegex = RegExp(closeTag, 'gi') \r\n    let endTagResults = '';\r\n    const footnoteEndIndices:number[] = [];\r\n    while ( (endTagResults = endTagRegex.exec(markup)) ) {\r\n        footnoteEndIndices.push(endTagResults.index + closeTag.length);\r\n    }\r\n\r\n    footnoteStartIndices.forEach((start, indexInArrayOfStarts) => {\r\n        const pluckedFootnote = markup.substring(start, footnoteEndIndices[indexInArrayOfStarts]);\r\n        allTags.push(pluckedFootnote);\r\n    })\r\n    return allTags;\r\n}\r\n\r\n// todo: turn this into a general ixScrollTo() function\r\nexport const elemWithinOneVHofBtm = (\r\n    target: HTMLElement,\r\n    parentElem?: HTMLElement, // not the scrollable parent. Probably the first descendent thereof.  Needs to be full-height, nonscrollable.\r\n    scrollableParent?: HTMLElement,\r\n) => {\r\n    if (!parentElem) {\r\n        const currentInstance = Constants.getInstanceFiles.find(element => element.current);\r\n        const currentXHTML = currentInstance?.xhtmls.find(element => element.current);\r\n        if (currentXHTML?.slug) {\r\n            parentElem = document.querySelector<HTMLElement>(`section[filing-url=\"${currentXHTML?.slug}\"]`);\r\n        }\r\n    }\r\n    if (!scrollableParent) {\r\n        const currentInstance = Constants.getInstanceFiles.find(element => element.current);\r\n        const currentXHTML = currentInstance?.xhtmls.find(element => element.current);\r\n        if (currentXHTML?.slug) {\r\n            scrollableParent = document.getElementById('dynamic-xbrl-form') as HTMLElement;\r\n        }\r\n    }\r\n\r\n    const viewHieght = scrollableParent?.offsetHeight || 0;\r\n    const parentHt = (parentElem as HTMLElement)?.offsetHeight || 0;\r\n\r\n    let distTopOfTargetToTopOfScrollableParent = 0;\r\n    let currentElement = target;\r\n\r\n    while (currentElement && currentElement !== parentElem) {\r\n        distTopOfTargetToTopOfScrollableParent += currentElement.offsetTop;\r\n        currentElement = currentElement.offsetParent;\r\n    }\r\n\r\n    if (scrollableParent == document.getElementById('dynamic-xbrl-form')) {\r\n        distTopOfTargetToTopOfScrollableParent -= Constants.getNavBarsHeight();\r\n    }\r\n\r\n    if (distTopOfTargetToTopOfScrollableParent > parentHt - viewHieght) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n","/* Created by staff of the U.S. Securities and Exchange Commission.\r\n * Data and content created by government employees within the scope of their employment\r\n * are not subject to domestic copyright protection. 17 U.S.C. 105.\r\n */\r\n\r\nimport { FetchAndMerge } from '../fetch-merge/fetch-merge';\r\n\r\nself.onmessage = ({ data }) => {\r\n    const fetchAndMerge = new FetchAndMerge(data);\r\n    fetchAndMerge.init().then(data => {\r\n        self.postMessage(data);\r\n    });\r\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [397], () => (__webpack_require__(2994)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.\" + \"7ccc7a0277fa9ee8974e\" + \".min.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/ixviewer-plus/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t549: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkixviewer_2\"] = self[\"webpackChunkixviewer_2\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","next","version","featureSet","scrollPosition","window","localStorage","getItem","hoverOption","getHTMLAttributes","getPaginationPerPage","getHtmlOverallFactsCount","getMetaSourceDocuments","getMetaTags","getInstanceFiles","getInlineFiles","setSections","sections","sessionStorage","setItem","JSON","stringify","getSectionsFromSessionStorage","sectionsFromLocal","parse","getStdRef","getFormInformation","getMetaCustomPrefix","getMetaDts","getMetaDocuments","input","getScrollPosition","document","getElementById","scrollTop","getNavBarsHeight","querySelector","offsetHeight","getFactAttrsFromAnchorProps","section","fact","instance","uniqueAnchor","name","contextRef","file","baseRef","ancestors","firstAnchor","mapCategoryName","isStandard","lowerCaseKey","toLowerCase","noStatementCatNameMap","standardCatNameMap","Object","prototype","hasOwnProperty","call","console","info","this","absolute","partial","map","params","customPrefix","instances","std_ref","init","XHTMLandInstance","initialLoad","Promise","all","fetchXHTML","fetchInstancesXmls","then","allResponses","errors","filter","element","length","error","message","current","forEach","index","currentInstance","xhtmls","loaded","xhtml","xml","mergeAllResponses","fetchMeta","fetchSummary","metalinks","filingSummary","metaVersion","some","find","metaLinksSections","values","metaLinksReports","filingSummaryReports","MyReports","Report","filingSummaryInputFiles","InputFiles","File","Array","isArray","reportsContainStatements","r","MenuCategory","_text","menuCategory","metaReport","Number","menuCat","subGroupType","groupType","shortName","mrFact","ancestorsRelevant","a","includes","reverse","join","inlineFactSelector","addFactProps","reportFileInfo","fileName","_attributes","original","instanceHtm","instanceDocName","doctype","addInstanceProps","menuCatMapped","domId","sanitize","normalizedSelector","replaceAll","convertToSelector","buildSectionsArrayFlatter","data","decodeWorkstationXmlInHtml","isWorkstation","html","closingXml","substring","indexOf","alert","promises","resolve","url","ixvUrl","redline","replace","fetch","headers","mode","credentials","response","status","text","Error","toString","doc","xhtmlData","catch","allXHTML","jsonUrl","json","XHTMLSlug","lastIndexOf","startsWith","instanceFileNames","keys","split","instanceObjects","instanceIndex","report","assign","slug","xmlSlugs","xmlUrls","xmlSlug","metaInstance","Map","xmlUrl","summary","xmlData","compact","FilingSummary","_xmlUrl","splice","xmlInstances","fetchedXMlString","instanceXmlAsJsonCompact","xbrl","buildInitialFactMap","extractSections","formInformation","extractFormInformation","enrichFactMapWithMetalinksData","nsprefix","prepareXHTMLForCurrentInstance","instanceXml","fileSlug","options","prefix","endsWith","xbrlKey","contextKey","unitKey","context","unit","footnote","setPeriodText","setSegmentData","setMeasureText","factCounter","key","attributes","id","set","ix","value","isFactHTML","updateValueToRemoveIDs","isAmountsOnly","isFactAmountsOnly","isTextOnly","isNegativeOnly","isFactNegativeOnly","isHTML","period","setPeriodInfo","period_dates","setPeriodDatesInfo","segment","setSegmentInfo","measure","setMeasureInfo","unitRef","scale","setScaleInfo","decimals","setDecimalsInfo","sign","setSignInfo","setFootnoteInfo","isEnabled","isHighlight","isSelected","content","getTextFromHTML","meta","metaCopy","tag","currentFact","factNameTag","factObjectMl","auth_ref","references","authRef","dimensions","dimension","Boolean","axis","concat","Set","singleReference","reduce","accumulator","findIndex","returnObject","fill","calculation","calculations","factCalculationProp","result","sectionElement","role","label","longName","getCalculationWeight","weight","getCalculationParent","parentTag","lang","labels","oldObject","newObject","property","finalResult","charAt","toUpperCase","slice","tempCurrent","documentation","definitions","Documentation","crdr","balance","xbrltype","localname","nsuri","presentation","$","hiddenFacts","fixImages","fixLinks","redLineFacts","excludeFacts","updates","attributeFacts","performance","now","from","attr","imageSlug","substr","attribs","href","updatedStyle","css","hiddenElement","cheerioElement","prop","removeAttr","debug","foundElements","addClass","currentSlug","closest","updateMap","mapKey","searchContextref","searchName","entries","getByNameAndContextRef","wrap","get","raw","format","isAdditional","parents","isCustom","continuedIDs","each","wrapInner","test","instant","date","Date","_array","getMonth","getUTCDate","getFullYear","startDate","endDate","yearDiff","monthDiff","factContext","entity","type","divide","numerator","unitNumerator","denominator","unitDenominator","factUnit","accumulateFootnote","ftObj","node","childNode","footnotes","actualFootnote","toFixed","parent","self","onmessage","FetchAndMerge","postMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","f","e","chunkId","u","miniCssF","obj","Symbol","toStringTag","p","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","push","bind","moreModules","runtime","pop"],"sourceRoot":""}