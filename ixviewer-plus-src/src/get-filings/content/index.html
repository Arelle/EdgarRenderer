<!doctype html>
<html lang="en">

<head>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        tr {
            height: 30px;
        }

        tr:nth-child(even) {

            background-color: #ccc;
        }
    </style>
    <script>
        (() => {
            fetch(`./input.json`).then((response) => {
                return response.json();
            }).then((json) => {
                const arrayOfJSON = Object.entries(json).map((current) => {
                    return {
                        ...current[1], ...{ id: current[0] }
                    }
                });
                arrayOfJSON.sort((a, b) => {
                    return b.multiple_files ? 1 : -1;
                });
                const ixviewerURL = `http://172.18.85.157:8080/ixviewer2plus/`
                const tbody = document.getElementById('dynamic');
                arrayOfJSON.forEach((current, index) => {
                    const tr = document.createElement('tr')

                    const id = document.createElement('td');
                    const idText = document.createTextNode(current['id']);
                    id.append(idText);
                    tr.append(id);

                    const version = document.createElement('td');
                    const versionText = document.createTextNode(current['version']);
                    version.append(versionText);
                    tr.append(version);

                    const multiple = document.createElement('td');
                    const multipleText = document.createTextNode(current.hasOwnProperty('multiple_files') ? 'MULTI-FILE' : '');
                    multiple.append(multipleText);
                    tr.append(multiple);

                    const instance = document.createElement('td');
                    const instanceText = document.createTextNode(current.hasOwnProperty('multiple_instance') ? 'MULTI-INSTANCE' : '');
                    instance.append(instanceText);
                    tr.append(instance);


                    const big = document.createElement('td');
                    const bigText = document.createTextNode(current['size'] ? 'LARGE-FILE' : '');
                    big.append(bigText);
                    tr.append(big);

                    const viewer = document.createElement('td');
                    const a = document.createElement('a');
                    a.setAttribute('href', `${ixviewerURL}${current['link'].replace(`?doc=`, `?doc=./../ixviewer-2-getter/`)}`);
                    a.setAttribute(`target`, `_blank`);
                    const viewerText = document.createTextNode(`Go See`);
                    a.append(viewerText);
                    viewer.append(a);
                    tr.append(viewer);

                    const sec = document.createElement('td');
                    const asec = document.createElement('a');
                    asec.setAttribute('href', `https://www.sec.gov/ix?doc=${current['sec']}`);
                    asec.setAttribute(`target`, `_blank`);
                    const viewerTextsec = document.createTextNode(`Go See`);
                    asec.append(viewerTextsec);
                    sec.append(asec);

                    tr.append(sec);
                    tbody.append(tr);
                });
            });
        })()

    </script>
</head>

<body>
    <h1>Below are working forms to test/analyze using the IXViewer-Plus.</h1>
    <p>We do NOT include any images or exhibits, so expect some console errors.</p>
    <table style="width: 50%;">
        <thead>
            <tr>
                <th>Accenssion #:</th>
                <th>Meta Version:</th>
                <th>Multiple-Files?</th>
                <th>Multiple-Instance?</th>
                <th>Large File (10MB or more)?</th>
                <th>Dev URL V:~2.0+:</th>
                <th>SEC.gov v:2:</th>
            </tr>
        </thead>

        <tbody id="dynamic">
        </tbody>
    </table>
</body>

</html>